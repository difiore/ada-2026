<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Applied Data Analysis 2026 - 11&nbsp; Functions and Flow Control</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./12-module.html" rel="next">
<link href="./10-module.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="css/style.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-module.html">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></a></li><li class="breadcrumb-item"><a href="./11-module.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functions and Flow Control</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Analysis 2026</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Preliminaries</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-logistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Logistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-typography-and-formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Typography and Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-programming-style-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming Style Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-useful-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful Resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>RStudio</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Extending the Functionality of <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Fundamentals of the <strong><em>R</em></strong> Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Basics of Version Control</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducible Research</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-module.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functions and Flow Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Part II - Statistics and Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to Statistics and Sampling</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Part III - Miscellany</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Exercises</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 01</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 02</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Assignments</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">References</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">List of Packages Used</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives"><span class="header-section-number">11.1</span> Objectives</a></li>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link" data-scroll-target="#preliminaries"><span class="header-section-number">11.2</span> Preliminaries</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">11.3</span> Functions</a></li>
  <li><a href="#conditional-expressions" id="toc-conditional-expressions" class="nav-link" data-scroll-target="#conditional-expressions"><span class="header-section-number">11.4</span> Conditional Expressions</a></li>
  <li><a href="#relational-operators" id="toc-relational-operators" class="nav-link" data-scroll-target="#relational-operators"><span class="header-section-number">11.5</span> Relational Operators</a></li>
  <li><a href="#logical-and-other-operators" id="toc-logical-and-other-operators" class="nav-link" data-scroll-target="#logical-and-other-operators"><span class="header-section-number">11.6</span> Logical and Other Operators</a></li>
  <li><a href="#iterating-with-loops" id="toc-iterating-with-loops" class="nav-link" data-scroll-target="#iterating-with-loops"><span class="header-section-number">11.7</span> Iterating with Loops</a>
  <ul class="collapse">
  <li><a href="#for-loops" id="toc-for-loops" class="nav-link" data-scroll-target="#for-loops"><code>for()</code> Loops</a></li>
  <li><a href="#challenge" id="toc-challenge" class="nav-link" data-scroll-target="#challenge">CHALLENGE</a></li>
  <li><a href="#while-loops" id="toc-while-loops" class="nav-link" data-scroll-target="#while-loops"><code>while()</code> Loops</a></li>
  </ul></li>
  <li><a href="#vectorization-and-functionals" id="toc-vectorization-and-functionals" class="nav-link" data-scroll-target="#vectorization-and-functionals"><span class="header-section-number">11.8</span> Vectorization and Functionals</a></li>
  <li><a href="#concept-review" id="toc-concept-review" class="nav-link" data-scroll-target="#concept-review">Concept Review</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-module.html">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></a></li><li class="breadcrumb-item"><a href="./11-module.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functions and Flow Control</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="module-11" class="quarto-section-identifier"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functions and Flow Control</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="objectives" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="objectives"><span class="header-section-number">11.1</span> Objectives</h2>
<blockquote class="blockquote">
<p>The objective of this module to become familiar with how some additional basic programming concepts are implemented in <strong><em>R</em></strong>.</p>
</blockquote>
</section>
<section id="preliminaries" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="preliminaries"><span class="header-section-number">11.2</span> Preliminaries</h2>
<ul>
<li>Install this package in <strong><em>R</em></strong>: <a href="https://cran.r-project.org/web/packages/sjmisc/sjmisc.pdf">{sjmisc}</a></li>
<li>Load {tidyverse}</li>
</ul>
</section>
<section id="functions" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="functions"><span class="header-section-number">11.3</span> Functions</h2>
<p>One of the strengths of using a programming language like <strong><em>R</em></strong> for data manipulation and analysis is that we can write our own functions to things we need to do in a particular way, e.g., to create a custom analysis or visualization. In <a href="04-module.html"><strong>Module 04</strong></a> we practiced writing our own simple function, and we will revisit that here.</p>
<p>Recall that the general format for a function is as follows:</p>
<pre><code>function_name &lt;- function(&lt;argument list&gt;) {
  &lt;function body&gt;
}</code></pre>
<p>Functions that we define ourselves can have <em>multiple arguments</em>, and each argument can have a <em>default value</em>. Arguments are separated by commas and default values are specified in the list of arguments. For example, suppose we wanted to make a function that added a user-specified <code>prefix</code> to every entry in a particular named variable in a data frame, we could write the following:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>add_prefix <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">prefix =</span> <span class="st">""</span>, variable) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    df[[variable]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(prefix, df[[variable]])</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(df)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">"Ned"</span>, <span class="st">"Sansa"</span>, <span class="st">"Cersei"</span>, <span class="st">"Tyrion"</span>, <span class="st">"Jon"</span>, <span class="st">"Daenerys"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Aria"</span>, <span class="st">"Brienne"</span>, <span class="st">"Rickon"</span>, <span class="st">"Edmure"</span>, <span class="st">"Petyr"</span>, <span class="st">"Jamie"</span>, <span class="st">"Robert"</span>, <span class="st">"Stannis"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Theon"</span>), <span class="at">house =</span> <span class="fu">c</span>(<span class="st">"Stark"</span>, <span class="st">"Stark"</span>, <span class="st">"Lannister"</span>, <span class="st">"Lannister"</span>, <span class="st">"Stark"</span>, <span class="st">"Targaryen"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Stark"</span>, <span class="st">"Tarth"</span>, <span class="st">"Stark"</span>, <span class="st">"Tully"</span>, <span class="st">"Baelish"</span>, <span class="st">"Lannister"</span>, <span class="st">"Baratheon"</span>, <span class="st">"Baratheon"</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Greyjoy"</span>), <span class="at">code =</span> <span class="fu">sample</span>(<span class="fl">1e+05</span><span class="sc">:</span><span class="dv">999999</span>, <span class="dv">15</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_prefix</span>(my_data, <span class="at">variable =</span> <span class="st">"house"</span>)  <span class="co"># uses default prefix</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name     house   code
## 1      Ned     Stark 993480
## 2    Sansa     Stark 146116
## 3   Cersei Lannister 608015
## 4   Tyrion Lannister 623425
## 5      Jon     Stark 368339
## 6 Daenerys Targaryen 560399</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_prefix</span>(my_data, <span class="at">prefix =</span> <span class="st">"House "</span>, <span class="at">variable =</span> <span class="st">"house"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name           house   code
## 1      Ned     House Stark 993480
## 2    Sansa     House Stark 146116
## 3   Cersei House Lannister 608015
## 4   Tyrion House Lannister 623425
## 5      Jon     House Stark 368339
## 6 Daenerys House Targaryen 560399</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_prefix</span>(my_data, <span class="at">prefix =</span> <span class="st">"00001-"</span>, <span class="at">variable =</span> <span class="st">"code"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name     house         code
## 1      Ned     Stark 00001-993480
## 2    Sansa     Stark 00001-146116
## 3   Cersei Lannister 00001-608015
## 4   Tyrion Lannister 00001-623425
## 5      Jon     Stark 00001-368339
## 6 Daenerys Targaryen 00001-560399</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> Arguments can be passed to a function in any order, as long as the argument name is included. For example, for the <code>add_prefix()</code> function above, the following are equivalent:</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(<span class="at">df =</span> my_data, <span class="at">variable =</span> <span class="st">"house"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name     house   code
## 1      Ned     Stark 993480
## 2    Sansa     Stark 146116
## 3   Cersei Lannister 608015
## 4   Tyrion Lannister 623425
## 5      Jon     Stark 368339
## 6 Daenerys Targaryen 560399</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># versus...</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(<span class="at">variable =</span> <span class="st">"house"</span>, <span class="at">df =</span> my_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name     house   code
## 1      Ned     Stark 993480
## 2    Sansa     Stark 146116
## 3   Cersei Lannister 608015
## 4   Tyrion Lannister 623425
## 5      Jon     Stark 368339
## 6 Daenerys Targaryen 560399</code></pre>
</div>
</div>
<p>Note that in the example above, because the argument name <code>prefix</code> was excluded, the default value was used.</p>
<p><strong><em>R</em></strong> also uses positional matching to assign values to arguments when argument names are excluded. Note the difference in the results of these lines:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(my_data, <span class="st">"00001-"</span>, <span class="st">"code"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name     house         code
## 1      Ned     Stark 00001-993480
## 2    Sansa     Stark 00001-146116
## 3   Cersei Lannister 00001-608015
## 4   Tyrion Lannister 00001-623425
## 5      Jon     Stark 00001-368339
## 6 Daenerys Targaryen 00001-560399</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># versus...</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(my_data, <span class="st">"House "</span>, <span class="st">"house"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name           house   code
## 1      Ned     House Stark 993480
## 2    Sansa     House Stark 146116
## 3   Cersei House Lannister 608015
## 4   Tyrion House Lannister 623425
## 5      Jon     House Stark 368339
## 6 Daenerys House Targaryen 560399</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># versus...</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(my_data, <span class="st">""</span>, <span class="st">"house"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##       name     house   code
## 1      Ned     Stark 993480
## 2    Sansa     Stark 146116
## 3   Cersei Lannister 608015
## 4   Tyrion Lannister 623425
## 5      Jon     Stark 368339
## 6 Daenerys Targaryen 560399</code></pre>
</div>
</div>
<p>If we try to run the line below, however, it throws an error because too few (unnamed) arguments are passed to the function for it to be able to disambiguate them:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(my_data, <span class="st">"00001-"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Unless otherwise specified, functions return the result of the last expression evaluated in the function body. However, is good programming practice to explicitly specify the object or value you want returned from the function with <code>return(&lt;value&gt;)</code> or <code>return(&lt;object&gt;)</code>.</p>
</section>
<section id="conditional-expressions" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="conditional-expressions"><span class="header-section-number">11.4</span> Conditional Expressions</h2>
<p>Conditional expressions are a basic feature of any programming language. They are used for “flow control”, i.e., to structure what your program does when. The most common conditional expression is the “if… else…” statement, which is used to direct flow of a program between two paths. The general form is:</p>
<pre><code>if (&lt;test&gt;) {
  &lt;action 1&gt;
} else {
  &lt;action 2&gt;
}</code></pre>
<p>As an example…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (i <span class="sc">==</span> <span class="cn">TRUE</span>) {</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"Yes"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"No"</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Yes"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (i <span class="sc">==</span> <span class="cn">TRUE</span>) {</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"Yes"</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"No"</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "No"</code></pre>
</div>
</div>
<p>A related form is the <code>ifelse()</code> function, which has three arguments: the test condition, the value to be returned or expression to be run if the test condition is true, and the value to be returned or expression to be run if the test condition is false. Unlike the “if… else…” formulation, the <code>ifelse()</code> function can work on a vector, too, and returns a vector.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Yes"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">11</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "No"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Yes" "Yes" "No"</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> There is also a {dplyr} version of the “if… else…” conditional: <code>if_else()</code>. I tend to use this one much more than the {base} <strong><em>R</em></strong> version.</p>
</blockquote>
<p>The function <code>case_when()</code> is the equivalent of mixing several “if… else…” statements.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">case_when</span>(i <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"small"</span>, i <span class="sc">&lt;=</span> <span class="dv">7</span> <span class="sc">~</span> <span class="st">"medium"</span>, i <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">"large"</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] "small"  "small"  "small"  "medium" "medium" "medium" "medium" "large" 
##  [9] "large"  "large"</code></pre>
</div>
</div>
<p>For conditional statements, there are two additional functions that are often useful: <code>any()</code> and <code>all()</code>. The <code>any()</code> function takes a vector of logical values and returns <code>TRUE</code> if <em>any</em> of the elements is TRUE, while the <code>all()</code> function takes a vector of logical values and returns <code>TRUE</code> if <em>all</em> elements are TRUE.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] FALSE</code></pre>
</div>
</div>
</section>
<section id="relational-operators" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="relational-operators"><span class="header-section-number">11.5</span> Relational Operators</h2>
<p>The following relational operators are often used in conditional expressions:</p>
<ul>
<li>less than, greater than: <code>&lt;</code>, <code>&gt;</code></li>
<li>less than or equal to, greater than or equal to: <code>&lt;=</code>, <code>&gt;=</code></li>
<li>equal to: <code>==</code> <strong>NOTE:</strong> This uses a double equal sign!</li>
<li>not equal to: <code>!=</code></li>
</ul>
</section>
<section id="logical-and-other-operators" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="logical-and-other-operators"><span class="header-section-number">11.6</span> Logical and Other Operators</h2>
<p>The following additional operators are also useful and important:</p>
<ul>
<li><code>!</code>: logical <strong>NOT</strong> Note that this operator can be applied to values <em>and</em> to functions</li>
<li><code>&amp;</code>: element-wise logical <strong>AND</strong> (applies to element in a vector)</li>
<li><code>&amp;&amp;</code>: logical <strong>AND</strong> (applies to single conditions or first element in vector)</li>
<li><code>|</code>: element-wise logical <strong>OR</strong> (applies to element in a vector)</li>
<li><code>||</code>: logical <strong>OR</strong> (applies to single conditions or first element in vector)</li>
<li><code>%in%</code>: tests for membership <strong>in</strong> a vector</li>
<li>the {sjmisc} package adds a “not in” operator to test for membership in a vector: <code>%nin%</code></li>
</ul>
<p>Examples:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">any</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>)  <span class="co"># logical NOT</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">all</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>)  <span class="co"># logical NOT</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] TRUE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>i <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">&amp;</span> (i<span class="sc">%%</span><span class="dv">3</span>) <span class="sc">==</span> <span class="dv">0</span>  <span class="co"># element-wise logical AND</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>i[<span class="dv">1</span>] <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">&amp;&amp;</span> (i[<span class="dv">1</span>]<span class="sc">%%</span><span class="dv">3</span>) <span class="sc">==</span> <span class="dv">0</span>  <span class="co"># logical AND</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] FALSE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>i <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">|</span> (i<span class="sc">%%</span><span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span>  <span class="co"># element-wise logical OR</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE
## [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>i[<span class="dv">1</span>] <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">||</span> (i[<span class="dv">1</span>]<span class="sc">%%</span><span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span>  <span class="co"># logical OR</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] FALSE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"There"</span>, <span class="st">"is"</span>, <span class="st">"grandeur"</span>, <span class="st">"in"</span>, <span class="st">"this"</span>, <span class="st">"view"</span>, <span class="st">"of"</span>, <span class="st">"life"</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="st">"grandeur"</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%in%</span> a  <span class="co"># membership</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"selection"</span>, <span class="st">"life"</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%in%</span> a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] FALSE  TRUE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjmisc)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%nin%</span> a  <span class="co"># not membership</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1]  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>sjmisc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="iterating-with-loops" class="level2" data-number="11.7">
<h2 data-number="11.7" class="anchored" data-anchor-id="iterating-with-loops"><span class="header-section-number">11.7</span> Iterating with Loops</h2>
<section id="for-loops" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="for-loops"><code>for()</code> Loops</h3>
<p>When we want to execute a particular piece of code multiple times, for example to iterate over a set of values or to apply the same function to a set of elements in a vector, one way (but not the only way!) to do this is with a <em>loop</em>. There are several different constructions we can use for looping, one of the most common of which is a <code>for()</code> loop. The basic contruction for a <code>for()</code> loop is:</p>
<pre><code>for (&lt;index&gt; in &lt;range&gt;){
  &lt;code to execute&gt;
}</code></pre>
<p>The following examples print out each element in a vector, <strong>v</strong>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">100</span>, <span class="at">to =</span> <span class="dv">120</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(v)) {</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># here, we are looping over the indices of v</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(v[i])</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 100
## [1] 102
## [1] 104
## [1] 106
## [1] 108
## [1] 110
## [1] 112
## [1] 114
## [1] 116
## [1] 118
## [1] 120</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(v)) {</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># seq_along() also loops over the indices of v</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(v[i])</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 100
## [1] 102
## [1] 104
## [1] 106
## [1] 108
## [1] 110
## [1] 112
## [1] 114
## [1] 116
## [1] 118
## [1] 120</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> v) {</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># here we loop over the elements of v</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(i)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 100
## [1] 102
## [1] 104
## [1] 106
## [1] 108
## [1] 110
## [1] 112
## [1] 114
## [1] 116
## [1] 118
## [1] 120</code></pre>
</div>
</div>
<p>It is good form and improves efficiency if we allocate memory to whatever output we may want to generate inside of a loop beforehand. For example, if we want to use a loop to calculate the <code>median()</code> across all Platyrrhine primate genera for the female brain size, female body size, and canine dimorphism variables in the Kamilar and Cooper dataset we have used previously, we could do the following:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/KamilarAndCooperData.csv"</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)  <span class="co"># creates a 'tibble'</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">filter</span>(d, Family <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Atelidae"</span>, <span class="st">"Pitheciidae"</span>, <span class="st">"Cebidae"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Brain_Size_Female_Mean, Body_mass_female_mean, Canine_Dimorphism)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co"># good practice</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"double"</span>, <span class="fu">ncol</span>(s))</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(s)) {</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(s[[i]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1]   29.0500 1030.0000    1.2955</code></pre>
</div>
</div>
<p>The following is another very common way to do this, but is less efficient as we are rewriting the object <strong>output</strong> (and making it one element longer) in every iteration of the loop.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># not so good practice</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(s)) {</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    output <span class="ot">&lt;-</span> <span class="fu">c</span>(output, <span class="fu">median</span>(s[[i]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1]   29.0500 1030.0000    1.2955</code></pre>
</div>
</div>
</section>
<section id="challenge" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="challenge">CHALLENGE</h3>
<p>Write a <code>for()</code> loop to print out each row in the data frame <strong>my_data</strong>.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(my_data)) {</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(my_data[i, ])</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>##   name house   code
## 1  Ned Stark 993480
##    name house   code
## 2 Sansa Stark 146116
##     name     house   code
## 3 Cersei Lannister 608015
##     name     house   code
## 4 Tyrion Lannister 623425
##   name house   code
## 5  Jon Stark 368339
##       name     house   code
## 6 Daenerys Targaryen 560399
##   name house   code
## 7 Aria Stark 202958
##      name house   code
## 8 Brienne Tarth 394548
##     name house   code
## 9 Rickon Stark 876183
##      name house   code
## 10 Edmure Tully 825413
##     name   house   code
## 11 Petyr Baelish 456488
##     name     house   code
## 12 Jamie Lannister 286854
##      name     house   code
## 13 Robert Baratheon 968448
##       name     house   code
## 14 Stannis Baratheon 758182
##     name   house   code
## 15 Theon Greyjoy 570138</code></pre>
</details>
</div>
</div>
<p>Write a <code>for()</code> loop to print out the reverse of each element in the <strong>code</strong> vector in the data frame <strong>my_data</strong>.</p>
<blockquote class="blockquote">
<p><strong>HINT:</strong> Check out the function <code>stri_reverse()</code> from the {stringi} package.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> my_data<span class="sc">$</span>code) {</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(stringi<span class="sc">::</span><span class="fu">stri_reverse</span>(i))</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>## [1] "084399"
## [1] "611641"
## [1] "510806"
## [1] "524326"
## [1] "933863"
## [1] "993065"
## [1] "859202"
## [1] "845493"
## [1] "381678"
## [1] "314528"
## [1] "884654"
## [1] "458682"
## [1] "844869"
## [1] "281857"
## [1] "831075"</code></pre>
</details>
</div>
</div>
</section>
<section id="while-loops" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="while-loops"><code>while()</code> Loops</h3>
<p>An alternative to using a <code>for()</code> loop for repeating a particular block of code is to use a <code>while()</code> loop. The general construction for a <code>while()</code> loop is:</p>
<pre><code>while (&lt;test expression&gt;) {
  &lt;code to execute&gt;
}</code></pre>
<p>Here, the test expression is evaluated at the start of the loop, and the body of the loop is only entered if the result is TRUE. Once the statements inside the loop are executed, flow returns to the top of the loop to evaluate the test expression again. That process is repeated until the test expression is FALSE, and then the loop is exited and control moves on to subsequent parts of the program.</p>
<p>As above, the following example prints out each element in the vector, <strong>v</strong>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">100</span>, <span class="at">to =</span> <span class="dv">120</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="fu">length</span>(v)) {</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(v[i])</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 100
## [1] 102
## [1] 104
## [1] 106
## [1] 108
## [1] 110
## [1] 112
## [1] 114
## [1] 116
## [1] 118
## [1] 120</code></pre>
</div>
</div>
</section>
</section>
<section id="vectorization-and-functionals" class="level2" data-number="11.8">
<h2 data-number="11.8" class="anchored" data-anchor-id="vectorization-and-functionals"><span class="header-section-number">11.8</span> Vectorization and Functionals</h2>
<p>In many cases what we want to do in a loop is apply the same function or operation to each of the elements in a vector, matrix, data frame, list or part thereof… and often we do not actually need a loop to do that. Rather, we can often use what is called a <em>vectorized function</em>, or <em>functional</em>. The function <code>sapply()</code>, and related functions (e.g., <code>apply()</code>, <code>lapply()</code>, <code>mapply()</code>, <code>vapply()</code>) are examples of functionals: they allow us to perform <em>element-wise</em> operations on the entries in a data object.</p>
<p>The function <code>sapply()</code> takes two arguments, a data object (a vector, list, or data frame) and a function (<code>FUN=</code>) to apply to its elements. Each element of the data object is passed on to the function, and the result is returned and concatenated into a <em>vector</em> of the same length as the original data object. <code>lapply()</code> is similar except that the output is a list rather than a vector.</p>
<p>The following examples replicate what we did with <code>for()</code> loops above. Here, <strong>s</strong> is a data frame, and the function <code>median()</code> is being applied to each element, i.e., each variable, in that data frame:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">sapply</span>(s, <span class="at">FUN =</span> median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Here we are passing on an extra argument to the `median()`function, i.e.,</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `na.rm=TRUE`. This is an example of 'dot-dot-dot' (`...`) being an extra</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co"># argument of the `sapply()` function where those arguments are 'passed</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="co"># through' as arguments of the `FUN=` function. Basically, this means that we</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co"># can pass on an arbitrary set and number of arguments into `sapply()` which,</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co"># in this case, are then being used in the `median()` function.</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## Brain_Size_Female_Mean  Body_mass_female_mean      Canine_Dimorphism 
##                29.0500              1030.0000                 1.2955</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">lapply</span>(s, <span class="at">FUN =</span> median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## $Brain_Size_Female_Mean
## [1] 29.05
## 
## $Body_mass_female_mean
## [1] 1030
## 
## $Canine_Dimorphism
## [1] 1.2955</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p>The <code>map()</code> family of functions from the {purrr} package (which is part of the {tidyverse} set of packages) works very similarly to the <code>apply()</code> functions:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(s, <span class="at">.f =</span> median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="co"># note the argument `.f=` instead of `FUN=` `map_dbl()` returns an atomic</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co"># vector of type 'double'</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## Brain_Size_Female_Mean  Body_mass_female_mean      Canine_Dimorphism 
##                29.0500              1030.0000                 1.2955</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output)  <span class="co"># returns a vector, like `sapply()`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">map</span>(s, <span class="at">.f =</span> median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `map()` returns a list</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## $Brain_Size_Female_Mean
## [1] 29.05
## 
## $Body_mass_female_mean
## [1] 1030
## 
## $Canine_Dimorphism
## [1] 1.2955</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output)  <span class="co"># returns a list, like `lapply()`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># `map_dfr()` returns a data frame</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(s, <span class="at">.f =</span> median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output)  <span class="co"># returns a data frame, unlike any of the `apply()` functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 1 × 3
##   Brain_Size_Female_Mean Body_mass_female_mean Canine_Dimorphism
##                    &lt;dbl&gt;                 &lt;dbl&gt;             &lt;dbl&gt;
## 1                   29.0                  1030              1.30</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># | include: false</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="concept-review" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="concept-review">Concept Review</h2>
<ul>
<li>Functions: arguments, default values, and “dot-dot-dot” (<code>...</code>)</li>
<li>Conditional expressions: <code>if... else...</code>, <code>ifelse()</code>, <code>if_else()</code>, <code>case_when()</code></li>
<li>Iterating with loops: <code>for()</code> loops, <code>while()</code> loops</li>
<li>Functionals for vectorizing data manipulations: <code>apply()</code> and <code>map()</code> families of function</li>
</ul>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./10-module.html" class="pagination-link  aria-label=" &lt;span="" wrangling&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./12-module.html" class="pagination-link" aria-label="<span class='chapter-number'>12</span>&nbsp; <span class='chapter-title'>Introduction to Statistics and Sampling</span>">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to Statistics and Sampling</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb94" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Functions and Flow Control {#module-11}</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Objectives</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; The objective of this module to become familiar with how some additional basic programming concepts are implemented in ***R***.</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preliminaries</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Install this package in ***R***: <span class="co">[</span><span class="ot">{sjmisc}</span><span class="co">](https://cran.r-project.org/web/packages/sjmisc/sjmisc.pdf)</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Load {tidyverse}</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a><span class="fu">## Functions</span></span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>One of the strengths of using a programming language like ***R*** for data manipulation and analysis is that we can write our own functions to things we need to do in a particular way, e.g., to create a custom analysis or visualization. In [**Module 04**](#module-04) we practiced writing our own simple function, and we will revisit that here.</span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a>Recall that the general format for a function is as follows:</span>
<span id="cb94-25"><a href="#cb94-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-26"><a href="#cb94-26" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-27"><a href="#cb94-27" aria-hidden="true" tabindex="-1"></a><span class="in">function_name &lt;- function(&lt;argument list&gt;) {</span></span>
<span id="cb94-28"><a href="#cb94-28" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;function body&gt;</span></span>
<span id="cb94-29"><a href="#cb94-29" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb94-30"><a href="#cb94-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-31"><a href="#cb94-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-32"><a href="#cb94-32" aria-hidden="true" tabindex="-1"></a>Functions that we define ourselves can have *multiple arguments*, and each argument can have a *default value*. Arguments are separated by commas and default values are specified in the list of arguments. For example, suppose we wanted to make a function that added a user-specified <span class="in">`prefix`</span> to every entry in a particular named variable in a data frame, we could write the following:</span>
<span id="cb94-33"><a href="#cb94-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-36"><a href="#cb94-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-37"><a href="#cb94-37" aria-hidden="true" tabindex="-1"></a>add_prefix <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">prefix =</span> <span class="st">""</span>, variable) {</span>
<span id="cb94-38"><a href="#cb94-38" aria-hidden="true" tabindex="-1"></a>  df[[variable]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(prefix, df[[variable]])</span>
<span id="cb94-39"><a href="#cb94-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb94-40"><a href="#cb94-40" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-41"><a href="#cb94-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-42"><a href="#cb94-42" aria-hidden="true" tabindex="-1"></a>my_data <span class="ot">&lt;-</span></span>
<span id="cb94-43"><a href="#cb94-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb94-44"><a href="#cb94-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Ned"</span>, <span class="st">"Sansa"</span>, <span class="st">"Cersei"</span>,  <span class="st">"Tyrion"</span>, <span class="st">"Jon"</span>, <span class="st">"Daenerys"</span>, <span class="st">"Aria"</span>, <span class="st">"Brienne"</span>, <span class="st">"Rickon"</span>, <span class="st">"Edmure"</span>, <span class="st">"Petyr"</span>, <span class="st">"Jamie"</span>, <span class="st">"Robert"</span>, <span class="st">"Stannis"</span>, <span class="st">"Theon"</span></span>
<span id="cb94-45"><a href="#cb94-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb94-46"><a href="#cb94-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">"house"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Stark"</span>, <span class="st">"Stark"</span>, <span class="st">"Lannister"</span>, <span class="st">"Lannister"</span>, <span class="st">"Stark"</span>, <span class="st">"Targaryen"</span>, <span class="st">"Stark"</span>, <span class="st">"Tarth"</span>, <span class="st">"Stark"</span>, <span class="st">"Tully"</span>, <span class="st">"Baelish"</span>, <span class="st">"Lannister"</span>, <span class="st">"Baratheon"</span>, <span class="st">"Baratheon"</span>, <span class="st">"Greyjoy"</span></span>
<span id="cb94-47"><a href="#cb94-47" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb94-48"><a href="#cb94-48" aria-hidden="true" tabindex="-1"></a>    <span class="st">"code"</span> <span class="ot">=</span> <span class="fu">sample</span>(<span class="dv">100000</span><span class="sc">:</span><span class="dv">999999</span>, <span class="dv">15</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-49"><a href="#cb94-49" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb94-50"><a href="#cb94-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-51"><a href="#cb94-51" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_prefix</span>(my_data, <span class="at">variable =</span> <span class="st">"house"</span>) <span class="co"># uses default prefix</span></span>
<span id="cb94-52"><a href="#cb94-52" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb94-53"><a href="#cb94-53" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_prefix</span>(my_data, <span class="at">prefix =</span> <span class="st">"House "</span>, <span class="at">variable =</span> <span class="st">"house"</span>) </span>
<span id="cb94-54"><a href="#cb94-54" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb94-55"><a href="#cb94-55" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_prefix</span>(my_data, <span class="at">prefix =</span> <span class="st">"00001-"</span>, <span class="at">variable =</span> <span class="st">"code"</span>) </span>
<span id="cb94-56"><a href="#cb94-56" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb94-57"><a href="#cb94-57" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-58"><a href="#cb94-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-59"><a href="#cb94-59" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** Arguments can be passed to a function in any order, as long as the argument name is included. For example, for the </span><span class="in">`add_prefix()`</span><span class="at"> function above, the following are equivalent:</span></span>
<span id="cb94-60"><a href="#cb94-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-63"><a href="#cb94-63" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-64"><a href="#cb94-64" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(<span class="at">df =</span> my_data, <span class="at">variable =</span> <span class="st">"house"</span>))</span>
<span id="cb94-65"><a href="#cb94-65" aria-hidden="true" tabindex="-1"></a><span class="co"># versus...</span></span>
<span id="cb94-66"><a href="#cb94-66" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(<span class="at">variable =</span> <span class="st">"house"</span>, <span class="at">df =</span> my_data))</span>
<span id="cb94-67"><a href="#cb94-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-68"><a href="#cb94-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-69"><a href="#cb94-69" aria-hidden="true" tabindex="-1"></a>Note that in the example above, because the argument name <span class="in">`prefix`</span> was excluded, the default value was used.</span>
<span id="cb94-70"><a href="#cb94-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-71"><a href="#cb94-71" aria-hidden="true" tabindex="-1"></a>***R*** also uses positional matching to assign values to arguments when argument names are excluded. Note the difference in the results of these lines:</span>
<span id="cb94-72"><a href="#cb94-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-73"><a href="#cb94-73" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r}</span></span>
<span id="cb94-74"><a href="#cb94-74" aria-hidden="true" tabindex="-1"></a><span class="in">head(add_prefix(my_data, "00001-", "code"))</span></span>
<span id="cb94-75"><a href="#cb94-75" aria-hidden="true" tabindex="-1"></a><span class="in"># versus...</span></span>
<span id="cb94-76"><a href="#cb94-76" aria-hidden="true" tabindex="-1"></a><span class="in">head(add_prefix(my_data, "House ", "house"))</span></span>
<span id="cb94-77"><a href="#cb94-77" aria-hidden="true" tabindex="-1"></a><span class="in"># versus...</span></span>
<span id="cb94-78"><a href="#cb94-78" aria-hidden="true" tabindex="-1"></a><span class="in">head(add_prefix(my_data, "", "house"))</span></span>
<span id="cb94-79"><a href="#cb94-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-80"><a href="#cb94-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-81"><a href="#cb94-81" aria-hidden="true" tabindex="-1"></a>If we try to run the line below, however, it throws an error because too few (unnamed) arguments are passed to the function for it to be able to disambiguate them:</span>
<span id="cb94-82"><a href="#cb94-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-85"><a href="#cb94-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-86"><a href="#cb94-86" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb94-87"><a href="#cb94-87" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">add_prefix</span>(my_data, <span class="st">"00001-"</span>))</span>
<span id="cb94-88"><a href="#cb94-88" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-89"><a href="#cb94-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-90"><a href="#cb94-90" aria-hidden="true" tabindex="-1"></a>Unless otherwise specified, functions return the result of the last expression evaluated in the function body. However, is good programming practice to explicitly specify the object or value you want returned from the function with <span class="in">`return(&lt;value&gt;)`</span> or <span class="in">`return(&lt;object&gt;)`</span>.</span>
<span id="cb94-91"><a href="#cb94-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-92"><a href="#cb94-92" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conditional Expressions</span></span>
<span id="cb94-93"><a href="#cb94-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-94"><a href="#cb94-94" aria-hidden="true" tabindex="-1"></a>Conditional expressions are a basic feature of any programming language. They are used for "flow control", i.e., to structure what your program does when. The most common conditional expression is the "if... else..." statement, which is used to direct flow of a program between two paths. The general form is:</span>
<span id="cb94-95"><a href="#cb94-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-96"><a href="#cb94-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-97"><a href="#cb94-97" aria-hidden="true" tabindex="-1"></a><span class="in">if (&lt;test&gt;) {</span></span>
<span id="cb94-98"><a href="#cb94-98" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;action 1&gt;</span></span>
<span id="cb94-99"><a href="#cb94-99" aria-hidden="true" tabindex="-1"></a><span class="in">} else {</span></span>
<span id="cb94-100"><a href="#cb94-100" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;action 2&gt;</span></span>
<span id="cb94-101"><a href="#cb94-101" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb94-102"><a href="#cb94-102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-103"><a href="#cb94-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-104"><a href="#cb94-104" aria-hidden="true" tabindex="-1"></a>As an example...</span>
<span id="cb94-105"><a href="#cb94-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-108"><a href="#cb94-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-109"><a href="#cb94-109" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb94-110"><a href="#cb94-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-111"><a href="#cb94-111" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (i <span class="sc">==</span> <span class="cn">TRUE</span>){</span>
<span id="cb94-112"><a href="#cb94-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Yes"</span>)</span>
<span id="cb94-113"><a href="#cb94-113" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb94-114"><a href="#cb94-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"No"</span>)</span>
<span id="cb94-115"><a href="#cb94-115" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-116"><a href="#cb94-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-117"><a href="#cb94-117" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb94-118"><a href="#cb94-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-119"><a href="#cb94-119" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (i <span class="sc">==</span> <span class="cn">TRUE</span>){</span>
<span id="cb94-120"><a href="#cb94-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Yes"</span>)</span>
<span id="cb94-121"><a href="#cb94-121" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb94-122"><a href="#cb94-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"No"</span>)</span>
<span id="cb94-123"><a href="#cb94-123" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-124"><a href="#cb94-124" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-125"><a href="#cb94-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-126"><a href="#cb94-126" aria-hidden="true" tabindex="-1"></a>A related form is the <span class="in">`ifelse()`</span> function, which has three arguments: the test condition, the value to be returned or expression to be run if the test condition is true, and the value to be returned or expression to be run if the test condition is false. Unlike the "if... else..." formulation, the <span class="in">`ifelse()`</span> function can work on a vector, too, and returns a vector.</span>
<span id="cb94-127"><a href="#cb94-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-130"><a href="#cb94-130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-131"><a href="#cb94-131" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb94-132"><a href="#cb94-132" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb94-133"><a href="#cb94-133" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">11</span></span>
<span id="cb94-134"><a href="#cb94-134" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb94-135"><a href="#cb94-135" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span>
<span id="cb94-136"><a href="#cb94-136" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb94-137"><a href="#cb94-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-138"><a href="#cb94-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-139"><a href="#cb94-139" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** There is also a {dplyr} version of the "if... else..." conditional: `if_else()`. I tend to use this one much more than the {base} ***R*** version.</span></span>
<span id="cb94-140"><a href="#cb94-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-141"><a href="#cb94-141" aria-hidden="true" tabindex="-1"></a>The function <span class="in">`case_when()`</span> is the equivalent of mixing several "if... else..." statements.</span>
<span id="cb94-142"><a href="#cb94-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-145"><a href="#cb94-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-146"><a href="#cb94-146" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb94-147"><a href="#cb94-147" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb94-148"><a href="#cb94-148" aria-hidden="true" tabindex="-1"></a>  i <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"small"</span>,</span>
<span id="cb94-149"><a href="#cb94-149" aria-hidden="true" tabindex="-1"></a>  i <span class="sc">&lt;=</span> <span class="dv">7</span> <span class="sc">~</span> <span class="st">"medium"</span>,</span>
<span id="cb94-150"><a href="#cb94-150" aria-hidden="true" tabindex="-1"></a>  i <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">"large"</span></span>
<span id="cb94-151"><a href="#cb94-151" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb94-152"><a href="#cb94-152" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-153"><a href="#cb94-153" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-154"><a href="#cb94-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-155"><a href="#cb94-155" aria-hidden="true" tabindex="-1"></a>For conditional statements, there are two additional functions that are often useful: <span class="in">`any()`</span> and <span class="in">`all()`</span>. The <span class="in">`any()`</span> function takes a vector of logical values and returns <span class="in">`TRUE`</span> if *any* of the elements is TRUE, while the `all()` function takes a vector of logical values and returns `TRUE` if *all* elements are TRUE.</span>
<span id="cb94-156"><a href="#cb94-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-159"><a href="#cb94-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-160"><a href="#cb94-160" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span>
<span id="cb94-161"><a href="#cb94-161" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb94-162"><a href="#cb94-162" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb94-163"><a href="#cb94-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-164"><a href="#cb94-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-165"><a href="#cb94-165" aria-hidden="true" tabindex="-1"></a><span class="fu">## Relational Operators</span></span>
<span id="cb94-166"><a href="#cb94-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-167"><a href="#cb94-167" aria-hidden="true" tabindex="-1"></a>The following relational operators are often used in conditional expressions:</span>
<span id="cb94-168"><a href="#cb94-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-169"><a href="#cb94-169" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>less than, greater than: <span class="in">`&lt;`</span>, <span class="in">`&gt;`</span></span>
<span id="cb94-170"><a href="#cb94-170" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>less than or equal to, greater than or equal to: <span class="in">`&lt;=`</span>, <span class="in">`&gt;=`</span></span>
<span id="cb94-171"><a href="#cb94-171" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>equal to: <span class="in">`==`</span> **NOTE:** This uses a double equal sign!</span>
<span id="cb94-172"><a href="#cb94-172" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>not equal to: <span class="in">`!=`</span></span>
<span id="cb94-173"><a href="#cb94-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-174"><a href="#cb94-174" aria-hidden="true" tabindex="-1"></a><span class="fu">## Logical and Other Operators</span></span>
<span id="cb94-175"><a href="#cb94-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-176"><a href="#cb94-176" aria-hidden="true" tabindex="-1"></a>The following additional operators are also useful and important:</span>
<span id="cb94-177"><a href="#cb94-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-178"><a href="#cb94-178" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`!`</span>: logical **NOT** Note that this operator can be applied to values *and* to functions</span>
<span id="cb94-179"><a href="#cb94-179" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`&amp;`</span>: element-wise logical **AND** (applies to element in a vector)</span>
<span id="cb94-180"><a href="#cb94-180" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`&amp;&amp;`</span>: logical **AND** (applies to single conditions or first element in vector)</span>
<span id="cb94-181"><a href="#cb94-181" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`|`</span>: element-wise logical **OR** (applies to element in a vector)</span>
<span id="cb94-182"><a href="#cb94-182" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`||`</span>: logical **OR** (applies to single conditions or first element in vector)</span>
<span id="cb94-183"><a href="#cb94-183" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`%in%`</span>: tests for membership **in** a vector</span>
<span id="cb94-184"><a href="#cb94-184" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>the {sjmisc} package adds a "not in" operator to test for membership in a vector: <span class="in">`%nin%`</span></span>
<span id="cb94-185"><a href="#cb94-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-186"><a href="#cb94-186" aria-hidden="true" tabindex="-1"></a>Examples:</span>
<span id="cb94-187"><a href="#cb94-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-190"><a href="#cb94-190" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-191"><a href="#cb94-191" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span>
<span id="cb94-192"><a href="#cb94-192" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">any</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>) <span class="co"># logical NOT</span></span>
<span id="cb94-193"><a href="#cb94-193" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">all</span>(i <span class="sc">&lt;=</span> <span class="dv">10</span>) <span class="co"># logical NOT</span></span>
<span id="cb94-194"><a href="#cb94-194" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-195"><a href="#cb94-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-198"><a href="#cb94-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-199"><a href="#cb94-199" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb94-200"><a href="#cb94-200" aria-hidden="true" tabindex="-1"></a>i <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">&amp;</span> (i<span class="sc">%%</span><span class="dv">3</span>) <span class="sc">==</span> <span class="dv">0</span> <span class="co"># element-wise logical AND</span></span>
<span id="cb94-201"><a href="#cb94-201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-202"><a href="#cb94-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-205"><a href="#cb94-205" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-206"><a href="#cb94-206" aria-hidden="true" tabindex="-1"></a>i[<span class="dv">1</span>] <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">&amp;&amp;</span> (i[<span class="dv">1</span>]<span class="sc">%%</span><span class="dv">3</span>) <span class="sc">==</span> <span class="dv">0</span> <span class="co"># logical AND</span></span>
<span id="cb94-207"><a href="#cb94-207" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-208"><a href="#cb94-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-211"><a href="#cb94-211" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-212"><a href="#cb94-212" aria-hidden="true" tabindex="-1"></a>i <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">|</span> (i<span class="sc">%%</span><span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span> <span class="co"># element-wise logical OR</span></span>
<span id="cb94-213"><a href="#cb94-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-214"><a href="#cb94-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-217"><a href="#cb94-217" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-218"><a href="#cb94-218" aria-hidden="true" tabindex="-1"></a>i[<span class="dv">1</span>] <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">||</span> (i[<span class="dv">1</span>]<span class="sc">%%</span><span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span> <span class="co"># logical OR</span></span>
<span id="cb94-219"><a href="#cb94-219" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-220"><a href="#cb94-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-223"><a href="#cb94-223" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-224"><a href="#cb94-224" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"There"</span>, <span class="st">"is"</span>, <span class="st">"grandeur"</span>, <span class="st">"in"</span>, <span class="st">"this"</span>, <span class="st">"view"</span>, <span class="st">"of"</span>, <span class="st">"life"</span>)</span>
<span id="cb94-225"><a href="#cb94-225" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="st">"grandeur"</span></span>
<span id="cb94-226"><a href="#cb94-226" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%in%</span> a <span class="co"># membership</span></span>
<span id="cb94-227"><a href="#cb94-227" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"selection"</span>,<span class="st">"life"</span>)</span>
<span id="cb94-228"><a href="#cb94-228" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%in%</span> a</span>
<span id="cb94-229"><a href="#cb94-229" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-230"><a href="#cb94-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-233"><a href="#cb94-233" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-234"><a href="#cb94-234" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb94-235"><a href="#cb94-235" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjmisc)</span>
<span id="cb94-236"><a href="#cb94-236" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%nin%</span> a <span class="co"># not membership</span></span>
<span id="cb94-237"><a href="#cb94-237" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>sjmisc)</span>
<span id="cb94-238"><a href="#cb94-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-239"><a href="#cb94-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-240"><a href="#cb94-240" aria-hidden="true" tabindex="-1"></a><span class="fu">## Iterating with Loops</span></span>
<span id="cb94-241"><a href="#cb94-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-242"><a href="#cb94-242" aria-hidden="true" tabindex="-1"></a><span class="fu">### `for()` Loops {.unnumbered}</span></span>
<span id="cb94-243"><a href="#cb94-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-244"><a href="#cb94-244" aria-hidden="true" tabindex="-1"></a>When we want to execute a particular piece of code multiple times, for example to iterate over a set of values or to apply the same function to a set of elements in a vector, one way (but not the only way!) to do this is with a *loop*. There are several different constructions we can use for looping, one of the most common of which is a <span class="in">`for()`</span> loop. The basic contruction for a <span class="in">`for()`</span> loop is:</span>
<span id="cb94-245"><a href="#cb94-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-246"><a href="#cb94-246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-247"><a href="#cb94-247" aria-hidden="true" tabindex="-1"></a><span class="in">for (&lt;index&gt; in &lt;range&gt;){</span></span>
<span id="cb94-248"><a href="#cb94-248" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;code to execute&gt;</span></span>
<span id="cb94-249"><a href="#cb94-249" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb94-250"><a href="#cb94-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-251"><a href="#cb94-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-252"><a href="#cb94-252" aria-hidden="true" tabindex="-1"></a>The following examples print out each element in a vector, **v**:</span>
<span id="cb94-253"><a href="#cb94-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-256"><a href="#cb94-256" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-257"><a href="#cb94-257" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">100</span>, <span class="at">to =</span> <span class="dv">120</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb94-258"><a href="#cb94-258" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(v)){ <span class="co"># here, we are looping over the indices of v</span></span>
<span id="cb94-259"><a href="#cb94-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(v[i]) </span>
<span id="cb94-260"><a href="#cb94-260" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-261"><a href="#cb94-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-262"><a href="#cb94-262" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(v)){ <span class="co"># seq_along() also loops over the indices of v</span></span>
<span id="cb94-263"><a href="#cb94-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(v[i])</span>
<span id="cb94-264"><a href="#cb94-264" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-265"><a href="#cb94-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-266"><a href="#cb94-266" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> v){ <span class="co"># here we loop over the elements of v</span></span>
<span id="cb94-267"><a href="#cb94-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb94-268"><a href="#cb94-268" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-269"><a href="#cb94-269" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-270"><a href="#cb94-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-271"><a href="#cb94-271" aria-hidden="true" tabindex="-1"></a>It is good form and improves efficiency if we allocate memory to whatever output we may want to generate inside of a loop beforehand. For example, if we want to use a loop to calculate the <span class="in">`median()`</span> across all Platyrrhine primate genera for the female brain size, female body size, and canine dimorphism variables in the Kamilar and Cooper dataset we have used previously, we could do the following:</span>
<span id="cb94-272"><a href="#cb94-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-275"><a href="#cb94-275" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-276"><a href="#cb94-276" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb94-277"><a href="#cb94-277" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/KamilarAndCooperData.csv"</span></span>
<span id="cb94-278"><a href="#cb94-278" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="co"># creates a "tibble"</span></span>
<span id="cb94-279"><a href="#cb94-279" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">filter</span>(d, Family <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Atelidae"</span>,<span class="st">"Pitheciidae"</span>,<span class="st">"Cebidae"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb94-280"><a href="#cb94-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Brain_Size_Female_Mean,Body_mass_female_mean,Canine_Dimorphism)</span>
<span id="cb94-281"><a href="#cb94-281" aria-hidden="true" tabindex="-1"></a><span class="co"># good practice</span></span>
<span id="cb94-282"><a href="#cb94-282" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"double"</span>, <span class="fu">ncol</span>(s))</span>
<span id="cb94-283"><a href="#cb94-283" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(s)) {</span>
<span id="cb94-284"><a href="#cb94-284" aria-hidden="true" tabindex="-1"></a>    output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(s[[i]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb94-285"><a href="#cb94-285" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-286"><a href="#cb94-286" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-287"><a href="#cb94-287" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-288"><a href="#cb94-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-289"><a href="#cb94-289" aria-hidden="true" tabindex="-1"></a>The following is another very common way to do this, but is less efficient as we are rewriting the object **output** (and making it one element longer) in every iteration of the loop.</span>
<span id="cb94-290"><a href="#cb94-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-293"><a href="#cb94-293" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-294"><a href="#cb94-294" aria-hidden="true" tabindex="-1"></a><span class="co"># not so good practice</span></span>
<span id="cb94-295"><a href="#cb94-295" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb94-296"><a href="#cb94-296" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(s)) {</span>
<span id="cb94-297"><a href="#cb94-297" aria-hidden="true" tabindex="-1"></a>    output <span class="ot">&lt;-</span> <span class="fu">c</span>(output, <span class="fu">median</span>(s[[i]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb94-298"><a href="#cb94-298" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-299"><a href="#cb94-299" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-300"><a href="#cb94-300" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-301"><a href="#cb94-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-302"><a href="#cb94-302" aria-hidden="true" tabindex="-1"></a><span class="fu">### CHALLENGE {.unnumbered}</span></span>
<span id="cb94-303"><a href="#cb94-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-304"><a href="#cb94-304" aria-hidden="true" tabindex="-1"></a>Write a <span class="in">`for()`</span> loop to print out each row in the data frame **my_data**.</span>
<span id="cb94-305"><a href="#cb94-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-308"><a href="#cb94-308" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-309"><a href="#cb94-309" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb94-310"><a href="#cb94-310" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb94-311"><a href="#cb94-311" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb94-312"><a href="#cb94-312" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(my_data)) {</span>
<span id="cb94-313"><a href="#cb94-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(my_data[i,])</span>
<span id="cb94-314"><a href="#cb94-314" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-315"><a href="#cb94-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-316"><a href="#cb94-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-317"><a href="#cb94-317" aria-hidden="true" tabindex="-1"></a>Write a <span class="in">`for()`</span> loop to print out the reverse of each element in the **code** vector in the data frame **my_data**.</span>
<span id="cb94-318"><a href="#cb94-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-319"><a href="#cb94-319" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **HINT:** Check out the function </span><span class="in">`stri_reverse()`</span><span class="at"> from the {stringi} package.</span></span>
<span id="cb94-320"><a href="#cb94-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-323"><a href="#cb94-323" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-324"><a href="#cb94-324" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb94-325"><a href="#cb94-325" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb94-326"><a href="#cb94-326" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb94-327"><a href="#cb94-327" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> my_data<span class="sc">$</span>code){</span>
<span id="cb94-328"><a href="#cb94-328" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(stringi<span class="sc">::</span><span class="fu">stri_reverse</span>(i))</span>
<span id="cb94-329"><a href="#cb94-329" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-330"><a href="#cb94-330" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-331"><a href="#cb94-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-332"><a href="#cb94-332" aria-hidden="true" tabindex="-1"></a><span class="fu">### `while()` Loops {.unnumbered}</span></span>
<span id="cb94-333"><a href="#cb94-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-334"><a href="#cb94-334" aria-hidden="true" tabindex="-1"></a>An alternative to using a <span class="in">`for()`</span> loop for repeating a particular block of code is to use a <span class="in">`while()`</span> loop. The general construction for a <span class="in">`while()`</span> loop is:</span>
<span id="cb94-335"><a href="#cb94-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-336"><a href="#cb94-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-337"><a href="#cb94-337" aria-hidden="true" tabindex="-1"></a><span class="in">while (&lt;test expression&gt;) {</span></span>
<span id="cb94-338"><a href="#cb94-338" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;code to execute&gt;</span></span>
<span id="cb94-339"><a href="#cb94-339" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb94-340"><a href="#cb94-340" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-341"><a href="#cb94-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-342"><a href="#cb94-342" aria-hidden="true" tabindex="-1"></a>Here, the test expression is evaluated at the start of the loop, and the body of the loop is only entered if the result is TRUE. Once the statements inside the loop are executed, flow returns to the top of the loop to evaluate the test expression again. That process is repeated until the test expression is FALSE, and then the loop is exited and control moves on to subsequent parts of the program.</span>
<span id="cb94-343"><a href="#cb94-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-344"><a href="#cb94-344" aria-hidden="true" tabindex="-1"></a>As above, the following example prints out each element in the vector, **v**:</span>
<span id="cb94-345"><a href="#cb94-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-348"><a href="#cb94-348" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-349"><a href="#cb94-349" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">100</span>, <span class="at">to =</span> <span class="dv">120</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb94-350"><a href="#cb94-350" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb94-351"><a href="#cb94-351" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="fu">length</span>(v)){</span>
<span id="cb94-352"><a href="#cb94-352" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(v[i])</span>
<span id="cb94-353"><a href="#cb94-353" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb94-354"><a href="#cb94-354" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-355"><a href="#cb94-355" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-356"><a href="#cb94-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-357"><a href="#cb94-357" aria-hidden="true" tabindex="-1"></a><span class="fu">## Vectorization and Functionals</span></span>
<span id="cb94-358"><a href="#cb94-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-359"><a href="#cb94-359" aria-hidden="true" tabindex="-1"></a>In many cases what we want to do in a loop is apply the same function or operation to each of the elements in a vector, matrix, data frame, list or part thereof... and often we do not actually need a loop to do that. Rather, we can often use what is called a *vectorized function*, or *functional*. The function `sapply()`, and related functions (e.g., `apply()`, `lapply()`, `mapply()`, `vapply()`) are examples of functionals: they allow us to perform *element-wise* operations on the entries in a data object.</span>
<span id="cb94-360"><a href="#cb94-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-361"><a href="#cb94-361" aria-hidden="true" tabindex="-1"></a>The function <span class="in">`sapply()`</span> takes two arguments, a data object (a vector, list, or data frame) and a function (<span class="in">`FUN=`</span>) to apply to its elements. Each element of the data object is passed on to the function, and the result is returned and concatenated into a *vector* of the same length as the original data object. <span class="in">`lapply()`</span> is similar except that the output is a list rather than a vector.</span>
<span id="cb94-362"><a href="#cb94-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-363"><a href="#cb94-363" aria-hidden="true" tabindex="-1"></a>The following examples replicate what we did with <span class="in">`for()`</span> loops above. Here, **s** is a data frame, and the function <span class="in">`median()`</span> is being applied to each element, i.e., each variable, in that data frame:</span>
<span id="cb94-364"><a href="#cb94-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-367"><a href="#cb94-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-368"><a href="#cb94-368" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">sapply</span>(s, <span class="at">FUN =</span> median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-369"><a href="#cb94-369" aria-hidden="true" tabindex="-1"></a><span class="co"># Here we are passing on an extra argument to the `median()`function, i.e., `na.rm=TRUE`. This is an example of "dot-dot-dot" (`...`) being an extra argument of the `sapply()` function where those arguments are "passed through" as arguments of the `FUN=` function. Basically, this means that we can pass on an arbitrary set and number of arguments into `sapply()` which, in this case, are then being used in the `median()` function.</span></span>
<span id="cb94-370"><a href="#cb94-370" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-371"><a href="#cb94-371" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output)</span>
<span id="cb94-372"><a href="#cb94-372" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">lapply</span>(s, <span class="at">FUN =</span> median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-373"><a href="#cb94-373" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-374"><a href="#cb94-374" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output)</span>
<span id="cb94-375"><a href="#cb94-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-376"><a href="#cb94-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-377"><a href="#cb94-377" aria-hidden="true" tabindex="-1"></a>The <span class="in">`map()`</span> family of functions from the {purrr} package (which is part of the {tidyverse} set of packages) works very similarly to the <span class="in">`apply()`</span> functions:</span>
<span id="cb94-378"><a href="#cb94-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-381"><a href="#cb94-381" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-382"><a href="#cb94-382" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(s, <span class="at">.f =</span> median, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb94-383"><a href="#cb94-383" aria-hidden="true" tabindex="-1"></a><span class="co"># note the argument `.f=` instead of `FUN=`</span></span>
<span id="cb94-384"><a href="#cb94-384" aria-hidden="true" tabindex="-1"></a><span class="co"># `map_dbl()` returns an atomic vector of type "double"</span></span>
<span id="cb94-385"><a href="#cb94-385" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-386"><a href="#cb94-386" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output) <span class="co"># returns a vector, like `sapply()`</span></span>
<span id="cb94-387"><a href="#cb94-387" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">map</span>(s, <span class="at">.f =</span> median, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb94-388"><a href="#cb94-388" aria-hidden="true" tabindex="-1"></a><span class="co"># `map()` returns a list</span></span>
<span id="cb94-389"><a href="#cb94-389" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-390"><a href="#cb94-390" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(output) <span class="co"># returns a list, like `lapply()`</span></span>
<span id="cb94-391"><a href="#cb94-391" aria-hidden="true" tabindex="-1"></a><span class="co"># `map_dfr()` returns a data frame</span></span>
<span id="cb94-392"><a href="#cb94-392" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(s, <span class="at">.f =</span> median, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb94-393"><a href="#cb94-393" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (output) <span class="co"># returns a data frame, unlike any of the `apply()` functions</span></span>
<span id="cb94-394"><a href="#cb94-394" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb94-395"><a href="#cb94-395" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-396"><a href="#cb94-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-399"><a href="#cb94-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb94-400"><a href="#cb94-400" aria-hidden="true" tabindex="-1"></a><span class="co"># | include: false</span></span>
<span id="cb94-401"><a href="#cb94-401" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>tidyverse)</span>
<span id="cb94-402"><a href="#cb94-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb94-403"><a href="#cb94-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-404"><a href="#cb94-404" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb94-405"><a href="#cb94-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-406"><a href="#cb94-406" aria-hidden="true" tabindex="-1"></a><span class="fu">## Concept Review {.unnumbered}</span></span>
<span id="cb94-407"><a href="#cb94-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-408"><a href="#cb94-408" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Functions: arguments, default values, and "dot-dot-dot" (<span class="in">`...`</span>)</span>
<span id="cb94-409"><a href="#cb94-409" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Conditional expressions: <span class="in">`if... else...`</span>, <span class="in">`ifelse()`</span>, <span class="in">`if_else()`</span>, <span class="in">`case_when()`</span></span>
<span id="cb94-410"><a href="#cb94-410" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Iterating with loops: <span class="in">`for()`</span> loops, <span class="in">`while()`</span> loops</span>
<span id="cb94-411"><a href="#cb94-411" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Functionals for vectorizing data manipulations: <span class="in">`apply()`</span> and <span class="in">`map()`</span> families of function</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>