<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Applied Data Analysis 2026 - 7&nbsp; Additional Data Structures in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./08-module.html" rel="next">
<link href="./06-module.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="css/style.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-module.html">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></a></li><li class="breadcrumb-item"><a href="./07-module.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Analysis 2026</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Preliminaries</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-logistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Logistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-typography-and-formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Typography and Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-programming-style-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming Style Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-useful-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful Resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>RStudio</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Extending the Functionality of <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Fundamentals of the <strong><em>R</em></strong> Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Basics of Version Control</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducible Research</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-module.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functions and Flow Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Part II - Statistics and Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to Statistics and Sampling</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Part III - Miscellany</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Exercises</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Assignments</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">References</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">List of Packages Used</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives"><span class="header-section-number">7.1</span> Objectives</a></li>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link" data-scroll-target="#preliminaries"><span class="header-section-number">7.2</span> Preliminaries</a></li>
  <li><a href="#matrices-and-arrays" id="toc-matrices-and-arrays" class="nav-link" data-scroll-target="#matrices-and-arrays"><span class="header-section-number">7.3</span> Matrices and Arrays</a>
  <ul class="collapse">
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link" data-scroll-target="#subsetting">Subsetting</a></li>
  <li><a href="#challenge" id="toc-challenge" class="nav-link" data-scroll-target="#challenge">CHALLENGE</a></li>
  <li><a href="#overwriting-elements" id="toc-overwriting-elements" class="nav-link" data-scroll-target="#overwriting-elements">Overwriting Elements</a></li>
  </ul></li>
  <li><a href="#lists-and-data-frames" id="toc-lists-and-data-frames" class="nav-link" data-scroll-target="#lists-and-data-frames"><span class="header-section-number">7.4</span> Lists and Data Frames</a>
  <ul class="collapse">
  <li><a href="#subsetting-lists" id="toc-subsetting-lists" class="nav-link" data-scroll-target="#subsetting-lists">Subsetting Lists</a></li>
  <li><a href="#filtering-rows-of-a-data-frame" id="toc-filtering-rows-of-a-data-frame" class="nav-link" data-scroll-target="#filtering-rows-of-a-data-frame">Filtering Rows of a Data Frame</a></li>
  <li><a href="#selecting-columns-of-a-data-frame" id="toc-selecting-columns-of-a-data-frame" class="nav-link" data-scroll-target="#selecting-columns-of-a-data-frame">Selecting Columns of a Data Frame</a></li>
  </ul></li>
  <li><a href="#factors" id="toc-factors" class="nav-link" data-scroll-target="#factors"><span class="header-section-number">7.5</span> Factors</a></li>
  <li><a href="#variable-conversion-and-coercion" id="toc-variable-conversion-and-coercion" class="nav-link" data-scroll-target="#variable-conversion-and-coercion"><span class="header-section-number">7.6</span> Variable Conversion and Coercion</a></li>
  <li><a href="#special-data-values" id="toc-special-data-values" class="nav-link" data-scroll-target="#special-data-values"><span class="header-section-number">7.7</span> Special Data Values</a>
  <ul class="collapse">
  <li><a href="#challenge-1" id="toc-challenge-1" class="nav-link" data-scroll-target="#challenge-1">CHALLENGE</a></li>
  </ul></li>
  <li><a href="#other-data-frame-like-structures" id="toc-other-data-frame-like-structures" class="nav-link" data-scroll-target="#other-data-frame-like-structures"><span class="header-section-number">7.8</span> Other Data Frame-Like Structures</a>
  <ul class="collapse">
  <li><a href="#data-tables" id="toc-data-tables" class="nav-link" data-scroll-target="#data-tables">Data Tables</a></li>
  <li><a href="#tibbles" id="toc-tibbles" class="nav-link" data-scroll-target="#tibbles">“Tibbles”</a></li>
  </ul></li>
  <li><a href="#concept-review" id="toc-concept-review" class="nav-link" data-scroll-target="#concept-review">Concept Review</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-module.html">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></a></li><li class="breadcrumb-item"><a href="./07-module.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="module-07" class="quarto-section-identifier"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="objectives" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="objectives"><span class="header-section-number">7.1</span> Objectives</h2>
<blockquote class="blockquote">
<p>The objective of this module is to introduce additional fundamental data structures in <strong><em>R</em></strong> (matrices, arrays, lists, data frames, and the like) and to learn how to extract, filter, and subset data from them.</p>
</blockquote>
</section>
<section id="preliminaries" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="preliminaries"><span class="header-section-number">7.2</span> Preliminaries</h2>
<ul>
<li>GO TO: <a href="https://github.com/difiore/ada-datasets" class="uri">https://github.com/difiore/ada-datasets</a>, select the “random-people.csv” file, then press the “Download” button and save the file to your local computer (e.g., on your desktop).</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/download-file.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>Alternatively, you can press the “Raw” button, highlight, and copy the text to a text editor, and save it. <strong><em>RStudio</em></strong>, as we have seen, has a powerful built-in text editor. There are also a number of other excellent text editors that you download for FREE (e.g., <a href="https://www.barebones.com/products/bbedit/"><strong><em>BBEdit</em></strong></a> for MacOS, <a href="https://notepad-plus-plus.org/"><strong><em>Notepad++</em></strong></a> for Windows, or <a href="https://code.visualstudio.com/"><strong><em>Visual Studio Code</em></strong></a> for either operating system). - Install and load these packages in <strong><em>R</em></strong>: <a href="https://cran.r-project.org/web/packages/tidyverse/tidyverse.pdf">{tidyverse}</a> (which includes {ggplot2}, {dplyr}, {readr}, {tibble}, and {tidyr}, plus others, so they do not need to be installed separately) and <a href="https://cran.r-project.org/web/packages/data.table/data.table.pdf">{data.table}</a></p>
</section>
<section id="matrices-and-arrays" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="matrices-and-arrays"><span class="header-section-number">7.3</span> Matrices and Arrays</h2>
<p>So far, we have seen several way of creating <strong>vectors</strong>, which are the most fundamental data structures in <strong><em>R</em></strong>. Today, we will explore and learn how to manipulate other fundamental data structures, including <strong>matrices</strong>, <strong>arrays</strong>, <strong>lists</strong>, and <strong>data frames</strong>, as well as variants on data frames (e.g., <strong>data tables</strong> and <strong>“tibbles”</strong>.)</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> The kind of vectors we have been talking about so far are also sometimes referred to as <em>atomic vectors</em>, and all of the elements of a vector have to have the same data type. We can think of <strong>lists</strong> (see below) as a different kind of vector, where the elements can have different types, but I prefer to consider lists as a different kind of data structure. Wickham (2019) <em>Advanced R, Second Edition</em> discusses the nuances of various <strong><em>R</em></strong> data structures in more detail.</p>
</blockquote>
<p>Matrices and arrays are extensions of the basic vector data structure, and like vectors, all of the elements in an array or matrix have to be of the same atomic type.</p>
<p>We can think of a <strong>matrix</strong> as a <em>two-dimensional</em> structure consisting of several atomic vectors stored together, but, more accurately, a matrix is essentially a single atomic vector that is split either into multiple columns or multiple rows of the same length. Matrices are useful constructs for performing many mathematical and statistical operations. Again, like 1-dimensional atomic vectors, matrices can only store data of one atomic class (e.g., <em>numerical</em> or <em>character</em>). Matrices are created using the <code>matrix()</code> function.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4</code></pre>
</div>
</div>
<p>Matrices are typically filled column-wise, with the argument, <code>byrow=</code>, set to FALSE by default (note that FALSE is not in quotation marks). This means that the first column of the matrix will be filled first, the second column second, etc.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
</div>
</div>
<p>This pattern can be changed by specifying the <code>byrow=</code> argument as TRUE.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
</div>
</div>
<p>You can also create matrices by <em>binding</em> vectors of the same length together either row-wise (with the function <code>rbind()</code>) or column-wise (with the function <code>cbind()</code>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(v1, v2)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>m1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    [,1] [,2] [,3] [,4]
## v1    1    2    3    4
## v2    6    7    8    9</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(v1, v2)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>m2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##      v1 v2
## [1,]  1  6
## [2,]  2  7
## [3,]  3  8
## [4,]  4  9</code></pre>
</div>
</div>
<p>Standard metadata about a matrix can be extracted using the <code>class()</code>, <code>dim()</code>, <code>names()</code>, <code>rownames()</code>, <code>colnames()</code> and other commands. The <code>dim()</code> command returns an vector containing the number of rows at index position 1 and the number of columns at index position 2.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "matrix" "array"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "matrix" "array"</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 4 2</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "v1" "v2"</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> In this example, <code>colnames</code> are not defined for <strong>m1</strong> since <code>rbind()</code> was used to create the matrix.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "v1" "v2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## NULL</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> Similarly, in this example, <code>rownames</code> are not defined for <strong>m2</strong>, since <code>cbind()</code> was used to create the matrix.</p>
</blockquote>
<p>As we saw with vectors, the <em>structure</em> (<code>str()</code>) and <em>glimpse</em> (<code>dplyr::glimpse()</code>) commands can be applied to any data structure to provide details about that object. These are incredibly useful functions that you will find yourself using over and over again.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  num [1:2, 1:4] 1 6 2 7 3 8 4 9
##  - attr(*, "dimnames")=List of 2
##   ..$ : chr [1:2] "v1" "v2"
##   ..$ : NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  num [1:4, 1:2] 1 2 3 4 6 7 8 9
##  - attr(*, "dimnames")=List of 2
##   ..$ : NULL
##   ..$ : chr [1:2] "v1" "v2"</code></pre>
</div>
</div>
<p>The <em>attributes</em> (<code>attributes()</code>) command can be used to list the attributes of a data structure.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## $dim
## [1] 2 4
## 
## $dimnames
## $dimnames[[1]]
## [1] "v1" "v2"
## 
## $dimnames[[2]]
## NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1, <span class="at">which =</span> <span class="st">"dim"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1, <span class="at">which =</span> <span class="st">"dimnames"</span>)[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "v1" "v2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1, <span class="at">which =</span> <span class="st">"dimnames"</span>)[[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## NULL</code></pre>
</div>
</div>
<p>An <strong>array</strong> is a more general atomic data structure, of which a vector (with 1 implicit dimension) and a matrix (with 2 defined dimensions) are but examples. Arrays can include additional dimensions, but (like vectors and matrices) they can only include elements that are all of the same atomic data class (e.g., <code>numeric</code>, <code>character</code>). The example below shows the construction of a 3 dimensional array with 5 rows, 6 columns, and 3 “levels”). Visualizing higher and higher dimension arrays, obviously, becomes challenging!</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">90</span>, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">3</span>))</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## , , 1
## 
##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    6   11   16   21   26
## [2,]    2    7   12   17   22   27
## [3,]    3    8   13   18   23   28
## [4,]    4    9   14   19   24   29
## [5,]    5   10   15   20   25   30
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]   31   36   41   46   51   56
## [2,]   32   37   42   47   52   57
## [3,]   33   38   43   48   53   58
## [4,]   34   39   44   49   54   59
## [5,]   35   40   45   50   55   60
## 
## , , 3
## 
##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]   61   66   71   76   81   86
## [2,]   62   67   72   77   82   87
## [3,]   63   68   73   78   83   88
## [4,]   64   69   74   79   84   89
## [5,]   65   70   75   80   85   90</code></pre>
</div>
</div>
<section id="subsetting" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="subsetting">Subsetting</h3>
<p>You can reference or extract select elements from vectors, matrices, and arrays by <em>subsetting</em> them using their index position(s) in what is knows as <strong>bracket notation</strong> (<code>[ ]</code>). For vectors, you would specify an index value in one dimension. For matrices, you would give the index values in two dimensions. For arrays generally, you would give index values for each dimension in the array.</p>
<p>For example, suppose you have the following vector:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>v</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36
##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54
##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72
##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90
##  [91]  91  92  93  94  95  96  97  98  99 100</code></pre>
</div>
</div>
<p>You can select the first 15 elements using bracket notation as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>v[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15</code></pre>
</div>
</div>
<p>You can also supply a vector of index values as the argument to <code>[ ]</code> to use for subsetting:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>v[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1]  2  4  6  8 10</code></pre>
</div>
</div>
<p>Similarly, you can also use a function or a calculation to subset a vector. What does the following return?</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">200</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>v[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] 101 103 105 107 109 111 113 115 117 119 121 123 125 127 129 131 133 135 137
## [20] 139 141 143 145 147 149 151 153 155 157 159 161 163 165 167 169 171 173 175
## [39] 177 179 181 183 185 187 189 191 193 195 197 199</code></pre>
</div>
</div>
<p>As an example for a matrix, suppose you have the following:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>, <span class="at">nrow =</span> <span class="dv">8</span>, <span class="at">ncol =</span> <span class="dv">10</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## [1,]    1    9   17   25   33   41   49   57   65    73
## [2,]    2   10   18   26   34   42   50   58   66    74
## [3,]    3   11   19   27   35   43   51   59   67    75
## [4,]    4   12   20   28   36   44   52   60   68    76
## [5,]    5   13   21   29   37   45   53   61   69    77
## [6,]    6   14   22   30   38   46   54   62   70    78
## [7,]    7   15   23   31   39   47   55   63   71    79
## [8,]    8   16   24   32   40   48   56   64   72    80</code></pre>
</div>
</div>
<p>You can extract the element in row 4, column 5 and assign it to a new variable, <strong>x</strong>, as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 36</code></pre>
</div>
</div>
<p>You can also extract an entire row or an entire column (or set of rows or set of columns) from a matrix by specifying the desired row or column number(s) and leaving the other value blank.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">4</span>, ]  <span class="co"># extracts 4th row</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1]  4 12 20 28 36 44 52 60 68 76</code></pre>
</div>
</div>
</section>
<section id="challenge" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="challenge">CHALLENGE</h3>
<ul>
<li>Given the matrix, <strong>m</strong>, above, extract the 2nd, 3rd, and 6th columns and assign them to the variable <strong>x</strong></li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">6</span>)]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>##      [,1] [,2] [,3]
## [1,]    9   17   41
## [2,]   10   18   42
## [3,]   11   19   43
## [4,]   12   20   44
## [5,]   13   21   45
## [6,]   14   22   46
## [7,]   15   23   47
## [8,]   16   24   48</code></pre>
</details>
</div>
</div>
<ul>
<li>Given the matrix, <strong>m</strong>, above, extract the 6th to 8th row and assign them to the variable <strong>x</strong></li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>, ]</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## [1,]    6   14   22   30   38   46   54   62   70    78
## [2,]    7   15   23   31   39   47   55   63   71    79
## [3,]    8   16   24   32   40   48   56   64   72    80</code></pre>
</details>
</div>
</div>
<ul>
<li>Given the matrix, <strong>m</strong>, above, extract the elements from row 2, column 2 to row 6, column 9 and assign them to the variable <strong>x</strong></li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>]</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]   10   18   26   34   42   50   58   66
## [2,]   11   19   27   35   43   51   59   67
## [3,]   12   20   28   36   44   52   60   68
## [4,]   13   21   29   37   45   53   61   69
## [5,]   14   22   30   38   46   54   62   70</code></pre>
</details>
</div>
</div>
</section>
<section id="overwriting-elements" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="overwriting-elements">Overwriting Elements</h3>
<p>You can replace elements in a vector or matrix, or even entire rows or columns, by identifying the elements to be replaced and then assigning them new values.</p>
<p>Starting with the matrix, <strong>m</strong>, defined above, explore what will be the effects of operations below. Pay careful attention to row and column index values, vector recycling, and automated conversion/recasting among data classes.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">7</span>, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">564</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>m[, <span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">19</span>, <span class="dv">18</span>, <span class="dv">17</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">20</span><span class="sc">:</span><span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">5</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>m[, <span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="lists-and-data-frames" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="lists-and-data-frames"><span class="header-section-number">7.4</span> Lists and Data Frames</h2>
<p>Unlike vectors, matrices, and arrays, two other data structures - <strong>lists</strong> and <strong>data frames</strong> - can be used to group together a heterogeneous mix of <strong><em>R</em></strong> structures and objects. A single list, for example, could contain a matrix, vector of character strings, vector of factors, an array, even another list.</p>
<p><strong>Lists</strong> are created using the <code>list()</code> function where the elements to add to the list are given as arguments to the function, separated by commas. Type in the following example:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"this"</span>, <span class="st">"is"</span>, <span class="st">"a"</span>, <span class="st">"vector"</span>, <span class="st">"of"</span>, <span class="st">"strings"</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this is a vector of character strings</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>, <span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">8</span>)  <span class="co"># this is a matrix</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="cn">FALSE</span>  <span class="co"># this is a boolean variable</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(s, m, b)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>l</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [[1]]
## [1] "this"    "is"      "a"       "vector"  "of"      "strings"
## 
## [[2]]
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    6   11   16   21   26   31   36
## [2,]    2    7   12   17   22   27   32   37
## [3,]    3    8   13   18   23   28   33   38
## [4,]    4    9   14   19   24   29   34   39
## [5,]    5   10   15   20   25   30   35   40
## 
## [[3]]
## [1] FALSE</code></pre>
</div>
</div>
<section id="subsetting-lists" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="subsetting-lists">Subsetting Lists</h3>
<p>You can reference or extract elements from a list similarly to how you would from other data structure, except that you use <strong>double brackets</strong> (<code>[[ ]]</code>) to reference a single element in the list.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    6   11   16   21   26   31   36
## [2,]    2    7   12   17   22   27   32   37
## [3,]    3    8   13   18   23   28   33   38
## [4,]    4    9   14   19   24   29   34   39
## [5,]    5   10   15   20   25   30   35   40</code></pre>
</div>
</div>
<p>An extension of this notation can be used to access elements contained <em>within</em> an element in the list. For example:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">2</span>, <span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 27</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1]  2  7 12 17 22 27 32 37</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][, <span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 26 27 28 29 30</code></pre>
</div>
</div>
<p>To reference or extract multiple elements from a list, you would use <strong>single bracket</strong> (<code>[ ]</code>) notation, which would itself return a list. This is called “list slicing”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [[1]]
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    6   11   16   21   26   31   36
## [2,]    2    7   12   17   22   27   32   37
## [3,]    3    8   13   18   23   28   33   38
## [4,]    4    9   14   19   24   29   34   39
## [5,]    5   10   15   20   25   30   35   40
## 
## [[2]]
## [1] FALSE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>l[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [[1]]
## [1] "this"    "is"      "a"       "vector"  "of"      "strings"
## 
## [[2]]
## [1] FALSE</code></pre>
</div>
</div>
<p>Using <code>class()</code> and <code>str()</code> (or <code>dplyr::glimpse()</code>) provides details about the our list and its three elements:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## List of 3
##  $ : chr [1:6] "this" "is" "a" "vector" ...
##  $ : int [1:5, 1:8] 1 2 3 4 5 6 7 8 9 10 ...
##  $ : logi FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## List of 3
##  $ : chr [1:6] "this" "is" "a" "vector" ...
##  $ : int [1:5, 1:8] 1 2 3 4 5 6 7 8 9 10 ...
##  $ : logi FALSE</code></pre>
</div>
</div>
<p>You can <em>name</em> the elements in a list using the <code>names()</code> function, which adds a name attribute to each list item.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(l) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"string"</span>, <span class="st">"matrix"</span>, <span class="st">"logical"</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "string"  "matrix"  "logical"</code></pre>
</div>
</div>
<p>You can also use the name of an item in the list to refer to it using the shortcut <code>$</code> notation. This is the equivalent of using <code>[[ ]]</code> with either the column number or the name of the column in quotation marks as the argument inside of the double bracket.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all of the following are equivalent!</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>string</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "this"    "is"      "a"       "vector"  "of"      "strings"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "this"    "is"      "a"       "vector"  "of"      "strings"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="st">"string"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "this"    "is"      "a"       "vector"  "of"      "strings"</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all of the following are equivalent</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>matrix[<span class="dv">3</span>, <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 23</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">3</span>, <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 23</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="st">"matrix"</span>]][<span class="dv">3</span>, <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 23</code></pre>
</div>
</div>
<p>The <strong>data frame</strong> is the perhaps the most useful (and most familiar) data structure that we can operate with in <strong><em>R</em></strong> as it most closely aligns with how we tend to represent tabular data, with rows as <em>cases</em> or <em>observations</em> and columns as <em>variables</em> describing those observations (e.g., a measurement of a particular type). Variables tend to be measured using the same units and thus fall into the same data class and can be thought of as analogous to vectors, so a data frame is essentially a list of atomic vectors that all have the same length.</p>
<p>The <code>data.frame()</code> command can be used to create data frames from scratch.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>,</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>), <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>))</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   firstName  community sex age
## 1      Rick Alexandria   M  42
## 2     Negan    Saviors   M  40
## 3    Dwight    Saviors   M  33
## 4    Maggie     Hiltop   F  28
## 5  Michonne Alexandria   F  31</code></pre>
</div>
</div>
<p>More commonly we read tabular data into <strong><em>R</em></strong> from some external data source (see <a href="08-module.html"><strong>Module 08</strong></a>, which typically results in the table being represented as a data frame. The following code, for example, will read from the file “random-people.csv” stored in a folder called “data” (a <code>data/</code> directory) located inside a user’s working directory.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"data/random-people.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="co"># only print select columns of this data frame head() means we will also only</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print the first several rows</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">11</span>, <span class="dv">12</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   gender name.first name.last login.password           dob
## 1   male        ted    wright          rolex  11/8/73 1:33
## 2   male    quentin   schmitt         norton  5/24/51 3:16
## 3 female      laura  johansen        stevens 5/22/77 21:03
## 4   male     ismael   herrero         303030   8/1/58 9:13
## 5 female     susana    blanco          aloha 12/18/55 3:21
## 6   male      mason    wilson         topdog  6/23/60 9:19</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> To run the example code above, you may need to replace the string in <code>file = "&lt;string&gt;"</code> with the path to where you stored the file on your local computer.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## 'data.frame':    20 obs. of  17 variables:
##  $ gender           : chr  "male" "male" "female" "male" ...
##  $ name.title       : chr  "mr" "mr" "ms" "mr" ...
##  $ name.first       : chr  "ted" "quentin" "laura" "ismael" ...
##  $ name.last        : chr  "wright" "schmitt" "johansen" "herrero" ...
##  $ location.street  : chr  "2020 royal ln" "2433 rue dubois" "2142 elmelunden" "3897 calle del barquillo" ...
##  $ location.city    : chr  "coffs harbour" "vitry-sur-seine" "silkeboeg" "gandia" ...
##  $ location.state   : chr  "tasmania" "indre-et-loire" "hovedstaden" "ceuta" ...
##  $ location.postcode: chr  "4126" "99856" "16264" "61349" ...
##  $ email            : chr  "ted.wright@example.com" "quentin.schmitt@example.com" "laura.johansen@example.com" "ismael.herrero@example.com" ...
##  $ login.username   : chr  "organicleopard402" "bluegoose191" "orangebird528" "heavyswan518" ...
##  $ login.password   : chr  "rolex" "norton" "stevens" "303030" ...
##  $ dob              : chr  "11/8/73 1:33" "5/24/51 3:16" "5/22/77 21:03" "8/1/58 9:13" ...
##  $ date.registered  : chr  "5/5/07 20:26" "4/11/11 7:05" "5/16/14 15:53" "2/17/06 16:53" ...
##  $ phone            : chr  "01-0349-5128" "05-72-65-32-21" "81616775" "974-117-403" ...
##  $ cell             : chr  "0449-989-455" "06-83-24-92-41" "697-993-20" "665-791-673" ...
##  $ picture.large    : chr  "https://randomuser.me/api/portraits/men/48.jpg" "https://randomuser.me/api/portraits/men/53.jpg" "https://randomuser.me/api/portraits/women/70.jpg" "https://randomuser.me/api/portraits/men/79.jpg" ...
##  $ nat              : chr  "AU" "FR" "DK" "ES" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## Rows: 20
## Columns: 17
## $ gender            &lt;chr&gt; "male", "male", "female", "male", "female", "male", …
## $ name.title        &lt;chr&gt; "mr", "mr", "ms", "mr", "ms", "mr", "mr", "miss", "m…
## $ name.first        &lt;chr&gt; "ted", "quentin", "laura", "ismael", "susana", "maso…
## $ name.last         &lt;chr&gt; "wright", "schmitt", "johansen", "herrero", "blanco"…
## $ location.street   &lt;chr&gt; "2020 royal ln", "2433 rue dubois", "2142 elmelunden…
## $ location.city     &lt;chr&gt; "coffs harbour", "vitry-sur-seine", "silkeboeg", "ga…
## $ location.state    &lt;chr&gt; "tasmania", "indre-et-loire", "hovedstaden", "ceuta"…
## $ location.postcode &lt;chr&gt; "4126", "99856", "16264", "61349", "29445", "91479",…
## $ email             &lt;chr&gt; "ted.wright@example.com", "quentin.schmitt@example.c…
## $ login.username    &lt;chr&gt; "organicleopard402", "bluegoose191", "orangebird528"…
## $ login.password    &lt;chr&gt; "rolex", "norton", "stevens", "303030", "aloha", "to…
## $ dob               &lt;chr&gt; "11/8/73 1:33", "5/24/51 3:16", "5/22/77 21:03", "8/…
## $ date.registered   &lt;chr&gt; "5/5/07 20:26", "4/11/11 7:05", "5/16/14 15:53", "2/…
## $ phone             &lt;chr&gt; "01-0349-5128", "05-72-65-32-21", "81616775", "974-1…
## $ cell              &lt;chr&gt; "0449-989-455", "06-83-24-92-41", "697-993-20", "665…
## $ picture.large     &lt;chr&gt; "https://randomuser.me/api/portraits/men/48.jpg", "h…
## $ nat               &lt;chr&gt; "AU", "FR", "DK", "ES", "ES", "NZ", "DE", "US", "TR"…</code></pre>
</div>
</div>
<p>As for other data structures, you can select and subset data frames using <strong>single bracket notation</strong> (<code>[ ]</code>). You can also select named columns from a data frame using the <code>$</code> operator or the equivalent <strong>double bracket notation</strong> (<code>[[ ]]</code>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single bracket notation</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
##  [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
## [11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
## [16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[, <span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following are all equivalent…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using the $ operator with the column name</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>name.last</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
##  [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
## [11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
## [16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df<span class="sc">$</span>name.last)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column `name.last`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using double bracket notation and a column index</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>df[[<span class="dv">4</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
##  [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
## [11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
## [16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[[<span class="dv">4</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using double bracket notation with the column name</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"name.last"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
##  [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
## [11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
## [16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[[<span class="st">"name.last"</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column `name.last`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that the following return data structures that are <em>not quite the same</em> as those returned above. Instead, these return <strong>data frames</strong> rather than <strong>vectors</strong>!</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using single bracket notation with a column index and no row index</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   name.last
## 1    wright
## 2   schmitt
## 3  johansen
## 4   herrero
## 5    blanco
## 6    wilson</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## 'data.frame':    20 obs. of  1 variable:
##  $ name.last: chr  "wright" "schmitt" "johansen" "herrero" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame of the data from column 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using single bracket notation with a column name</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[<span class="st">"name.last"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   name.last
## 1    wright
## 2   schmitt
## 3  johansen
## 4   herrero
## 5    blanco
## 6    wilson</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[<span class="st">"name.last"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## 'data.frame':    20 obs. of  1 variable:
##  $ name.last: chr  "wright" "schmitt" "johansen" "herrero" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame of the data from column `name.last`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As with matrixes, you can add rows (additional cases) or columns (additional variables) to a data frame using <code>rbind()</code> and <code>cbind()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df, <span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>))</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df, <span class="at">school =</span> <span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>,</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>,</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>))</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   gender name.title name.first name.last          location.street
## 1   male         mr        ted    wright            2020 royal ln
## 2   male         mr    quentin   schmitt          2433 rue dubois
## 3 female         ms      laura  johansen          2142 elmelunden
## 4   male         mr     ismael   herrero 3897 calle del barquillo
## 5 female         ms     susana    blanco  2208 avenida de america
## 6   male         mr      mason    wilson         4576 wilson road
##     location.city location.state location.postcode                       email
## 1   coffs harbour       tasmania              4126      ted.wright@example.com
## 2 vitry-sur-seine indre-et-loire             99856 quentin.schmitt@example.com
## 3       silkeboeg    hovedstaden             16264  laura.johansen@example.com
## 4          gandia          ceuta             61349  ismael.herrero@example.com
## 5        mastoles    extremadura             29445   susana.blanco@example.com
## 6         dunedin       taranaki             91479    mason.wilson@example.com
##      login.username login.password           dob date.registered          phone
## 1 organicleopard402          rolex  11/8/73 1:33    5/5/07 20:26   01-0349-5128
## 2      bluegoose191         norton  5/24/51 3:16    4/11/11 7:05 05-72-65-32-21
## 3     orangebird528        stevens 5/22/77 21:03   5/16/14 15:53       81616775
## 4      heavyswan518         303030   8/1/58 9:13   2/17/06 16:53    974-117-403
## 5    silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55    917-199-202
## 6    organicduck470         topdog  6/23/60 9:19    12/1/08 8:31 (137)-326-5772
##             cell                                    picture.large nat id school
## 1   0449-989-455   https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
## 2 06-83-24-92-41   https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
## 3     697-993-20 https://randomuser.me/api/portraits/women/70.jpg  DK  3    A&amp;M
## 4    665-791-673   https://randomuser.me/api/portraits/men/79.jpg  ES  4    A&amp;M
## 5    612-612-929 https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
## 6 (700)-060-1523   https://randomuser.me/api/portraits/men/60.jpg  NZ  6   Rice</code></pre>
</div>
</div>
<p>Alternatively, you can extend a data frame by adding a new variable directly using the <code>$</code> operator, like this:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>school <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"UT"</span>, <span class="st">"UT"</span>,</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>,</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A&amp;M"</span>)</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   gender name.title name.first name.last          location.street
## 1   male         mr        ted    wright            2020 royal ln
## 2   male         mr    quentin   schmitt          2433 rue dubois
## 3 female         ms      laura  johansen          2142 elmelunden
## 4   male         mr     ismael   herrero 3897 calle del barquillo
## 5 female         ms     susana    blanco  2208 avenida de america
## 6   male         mr      mason    wilson         4576 wilson road
##     location.city location.state location.postcode                       email
## 1   coffs harbour       tasmania              4126      ted.wright@example.com
## 2 vitry-sur-seine indre-et-loire             99856 quentin.schmitt@example.com
## 3       silkeboeg    hovedstaden             16264  laura.johansen@example.com
## 4          gandia          ceuta             61349  ismael.herrero@example.com
## 5        mastoles    extremadura             29445   susana.blanco@example.com
## 6         dunedin       taranaki             91479    mason.wilson@example.com
##      login.username login.password           dob date.registered          phone
## 1 organicleopard402          rolex  11/8/73 1:33    5/5/07 20:26   01-0349-5128
## 2      bluegoose191         norton  5/24/51 3:16    4/11/11 7:05 05-72-65-32-21
## 3     orangebird528        stevens 5/22/77 21:03   5/16/14 15:53       81616775
## 4      heavyswan518         303030   8/1/58 9:13   2/17/06 16:53    974-117-403
## 5    silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55    917-199-202
## 6    organicduck470         topdog  6/23/60 9:19    12/1/08 8:31 (137)-326-5772
##             cell                                    picture.large nat id school
## 1   0449-989-455   https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
## 2 06-83-24-92-41   https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
## 3     697-993-20 https://randomuser.me/api/portraits/women/70.jpg  DK  3    A&amp;M
## 4    665-791-673   https://randomuser.me/api/portraits/men/79.jpg  ES  4    A&amp;M
## 5    612-612-929 https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
## 6 (700)-060-1523   https://randomuser.me/api/portraits/men/60.jpg  NZ  6   Rice</code></pre>
</div>
</div>
<p>Using the <code>[[ ]]</code> operator with a new variable name in quotation marks works, too:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"school"</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"UT"</span>, <span class="st">"UT"</span>,</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>,</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A&amp;M"</span>)</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   gender name.title name.first name.last          location.street
## 1   male         mr        ted    wright            2020 royal ln
## 2   male         mr    quentin   schmitt          2433 rue dubois
## 3 female         ms      laura  johansen          2142 elmelunden
## 4   male         mr     ismael   herrero 3897 calle del barquillo
## 5 female         ms     susana    blanco  2208 avenida de america
## 6   male         mr      mason    wilson         4576 wilson road
##     location.city location.state location.postcode                       email
## 1   coffs harbour       tasmania              4126      ted.wright@example.com
## 2 vitry-sur-seine indre-et-loire             99856 quentin.schmitt@example.com
## 3       silkeboeg    hovedstaden             16264  laura.johansen@example.com
## 4          gandia          ceuta             61349  ismael.herrero@example.com
## 5        mastoles    extremadura             29445   susana.blanco@example.com
## 6         dunedin       taranaki             91479    mason.wilson@example.com
##      login.username login.password           dob date.registered          phone
## 1 organicleopard402          rolex  11/8/73 1:33    5/5/07 20:26   01-0349-5128
## 2      bluegoose191         norton  5/24/51 3:16    4/11/11 7:05 05-72-65-32-21
## 3     orangebird528        stevens 5/22/77 21:03   5/16/14 15:53       81616775
## 4      heavyswan518         303030   8/1/58 9:13   2/17/06 16:53    974-117-403
## 5    silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55    917-199-202
## 6    organicduck470         topdog  6/23/60 9:19    12/1/08 8:31 (137)-326-5772
##             cell                                    picture.large nat id school
## 1   0449-989-455   https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
## 2 06-83-24-92-41   https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
## 3     697-993-20 https://randomuser.me/api/portraits/women/70.jpg  DK  3    A&amp;M
## 4    665-791-673   https://randomuser.me/api/portraits/men/79.jpg  ES  4    A&amp;M
## 5    612-612-929 https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
## 6 (700)-060-1523   https://randomuser.me/api/portraits/men/60.jpg  NZ  6   Rice</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> In the above examples, <code>cbind()</code> results in <strong>school</strong> being added as a <em>factor</em> while using the <strong>$</strong> operator results in <strong>school</strong> being added as a <em>character</em> vector. You can see this by using the <code>str()</code> command.</p>
</blockquote>
<p>A <em>factor</em> is another atomic data class for <strong><em>R</em></strong> for dealing efficiently with nominal variables, usually character strings. Internally, <strong><em>R</em></strong> assigns integer values to each unique string (e.g., 1 for “female”, 2 for “male”, etc.).</p>
</section>
<section id="filtering-rows-of-a-data-frame" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="filtering-rows-of-a-data-frame">Filtering Rows of a Data Frame</h3>
<p>An expression that evaluates to a logical vector also be used to subset data frames. Here, we filter the data frame for only those rows where the variable <strong>school</strong> is “UT”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span>, ]</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    gender name.title name.first  name.last         location.street
## 1    male         mr        ted     wright           2020 royal ln
## 2    male         mr    quentin    schmitt         2433 rue dubois
## 5  female         ms     susana     blanco 2208 avenida de america
## 8  female       miss     kaylee     gordon         5475 camden ave
## 9    male         mr     baraek limoncuocu          2664 baedat cd
## 12   male         mr   valtteri   waisanen          9850 hemeentie
## 14 female       miss   kimberly      brown         8654 manor road
## 18 female         ms       ella       neva          4620 visiokatu
##      location.city location.state location.postcode
## 1    coffs harbour       tasmania              4126
## 2  vitry-sur-seine indre-et-loire             99856
## 5         mastoles    extremadura             29445
## 8            flint         oregon             84509
## 9            siirt          tokat             86146
## 12          halsua  south karelia             58124
## 14          bangor        borders          HI92 8RY
## 18          kerava finland proper             26385
##                              email    login.username login.password
## 1           ted.wright@example.com organicleopard402          rolex
## 2      quentin.schmitt@example.com      bluegoose191         norton
## 5        susana.blanco@example.com    silverkoala701          aloha
## 8        kaylee.gordon@example.com beautifulgoose794       atlantis
## 9  baraek.limoncuoculu@example.com whitebutterfly599         tobias
## 12   valtteri.waisanen@example.com        redswan919       nocturne
## 14      kimberly.brown@example.com  crazyelephant996       nebraska
## 18           ella.neva@example.com  orangegorilla786       f00tball
##               dob date.registered          phone           cell
## 1    11/8/73 1:33    5/5/07 20:26   01-0349-5128   0449-989-455
## 2    5/24/51 3:16    4/11/11 7:05 05-72-65-32-21 06-83-24-92-41
## 5   12/18/55 3:21   10/3/02 17:55    917-199-202    612-612-929
## 8   3/24/48 12:22     5/5/13 8:14 (817)-962-1275 (831)-325-1142
## 9    5/8/92 22:01    9/12/04 0:56 (023)-879-4331 (837)-014-1113
## 12 12/24/80 10:40   9/22/03 20:47     02-227-661  042-153-83-79
## 14    1/9/86 8:54    12/3/11 0:41   017684 80873   0799-553-944
## 18  7/18/91 14:30    3/17/14 7:13     02-351-279  043-436-42-30
##                                       picture.large nat id school
## 1    https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
## 2    https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
## 5  https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
## 8  https://randomuser.me/api/portraits/women/65.jpg  US  8     UT
## 9    https://randomuser.me/api/portraits/men/94.jpg  TR  9     UT
## 12   https://randomuser.me/api/portraits/men/80.jpg  FI 12     UT
## 14 https://randomuser.me/api/portraits/women/49.jpg  GB 14     UT
## 18 https://randomuser.me/api/portraits/women/68.jpg  FI 18     UT</code></pre>
</div>
</div>
<p>In this case, <strong><em>R</em></strong> evaluates the expression <code>df$school == "UT"</code> and returns a logical vector equal in length to the number of rows in <strong>df</strong>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1]  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE
## [13] FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>It then subsets the original <strong>df</strong> based on that vector, returning only rows that evaluate to “TRUE”.</p>
<p>The Boolean operators <code>&amp;</code> (for “AND”) and <code>|</code> (for “OR”) can be used to create more complex filtering criteria. Here, we filter the data frame for only those rows where the variable <strong>school</strong> is “UT” <em>AND</em> the variable <strong>gender</strong> is “female”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span> <span class="sc">&amp;</span> df<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"female"</span>, ]</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    gender name.title name.first name.last         location.street location.city
## 5  female         ms     susana    blanco 2208 avenida de america      mastoles
## 8  female       miss     kaylee    gordon         5475 camden ave         flint
## 14 female       miss   kimberly     brown         8654 manor road        bangor
## 18 female         ms       ella      neva          4620 visiokatu        kerava
##    location.state location.postcode                      email
## 5     extremadura             29445  susana.blanco@example.com
## 8          oregon             84509  kaylee.gordon@example.com
## 14        borders          HI92 8RY kimberly.brown@example.com
## 18 finland proper             26385      ella.neva@example.com
##       login.username login.password           dob date.registered
## 5     silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55
## 8  beautifulgoose794       atlantis 3/24/48 12:22     5/5/13 8:14
## 14  crazyelephant996       nebraska   1/9/86 8:54    12/3/11 0:41
## 18  orangegorilla786       f00tball 7/18/91 14:30    3/17/14 7:13
##             phone           cell
## 5     917-199-202    612-612-929
## 8  (817)-962-1275 (831)-325-1142
## 14   017684 80873   0799-553-944
## 18     02-351-279  043-436-42-30
##                                       picture.large nat id school
## 5  https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
## 8  https://randomuser.me/api/portraits/women/65.jpg  US  8     UT
## 14 https://randomuser.me/api/portraits/women/49.jpg  GB 14     UT
## 18 https://randomuser.me/api/portraits/women/68.jpg  FI 18     UT</code></pre>
</div>
</div>
<p>Here, we filter the data frame for only rows where either the <strong>school</strong> is “UT” <em>OR</em> the variable <strong>gender</strong> is “female”, using the <code>|</code> operator. We also select only the columns <strong>gender</strong>, <strong>name.first</strong>, and <strong>name.last</strong> by passing a vector to the second argument of the <code>[ ]</code> function.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span> <span class="sc">|</span> df<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"female"</span>, <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"name.first"</span>,</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name.last"</span>)]</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    gender name.first  name.last
## 1    male        ted     wright
## 2    male    quentin    schmitt
## 3  female      laura   johansen
## 5  female     susana     blanco
## 8  female     kaylee     gordon
## 9    male     baraek limoncuocu
## 12   male   valtteri   waisanen
## 13 female    vanessa     brewer
## 14 female   kimberly      brown
## 15 female     loreen   baettner
## 16 female      becky    wallace
## 18 female       ella       neva</code></pre>
</div>
</div>
</section>
<section id="selecting-columns-of-a-data-frame" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="selecting-columns-of-a-data-frame">Selecting Columns of a Data Frame</h3>
<p>We can also select to only return particular columns when we filter. Here, we return only the columns <strong>name.last</strong>, <strong>name.first</strong>, and <strong>school</strong>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span>, <span class="fu">c</span>(<span class="st">"name.last"</span>, <span class="st">"name.first"</span>, <span class="st">"school"</span>)]</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##     name.last name.first school
## 1      wright        ted     UT
## 2     schmitt    quentin     UT
## 5      blanco     susana     UT
## 8      gordon     kaylee     UT
## 9  limoncuocu     baraek     UT
## 12   waisanen   valtteri     UT
## 14      brown   kimberly     UT
## 18       neva       ella     UT</code></pre>
</div>
</div>
<p>Here, we return all rows from the data frame, but only the “name.last”, “name.first”, and “school” columns.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[, <span class="fu">c</span>(<span class="st">"name.last"</span>, <span class="st">"name.first"</span>, <span class="st">"school"</span>)]</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##     name.last name.first      school
## 1      wright        ted          UT
## 2     schmitt    quentin          UT
## 3    johansen      laura         A&amp;M
## 4     herrero     ismael         A&amp;M
## 5      blanco     susana          UT
## 6      wilson      mason        Rice
## 7     strauio       lutz  Texas Tech
## 8      gordon     kaylee          UT
## 9  limoncuocu     baraek          UT
## 10     perrin     basile Texas State
## 11      lopez      ruben         A&amp;M
## 12   waisanen   valtteri          UT
## 13     brewer    vanessa        Rice
## 14      brown   kimberly          UT
## 15   baettner     loreen         A&amp;M
## 16    wallace      becky  Texas Tech
## 17   gonzalez     hector         A&amp;M
## 18       neva       ella          UT
## 19    barnaby      simon Texas State
## 20      moser        max         A&amp;M</code></pre>
</div>
</div>
<p>We can also refer to columns by their positions and return them in a select order, thereby restructuring the data frame. Here, we return all rows from the data frame, but include only columns 1, 3, and 4, flipping the order of the latter two columns:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)]</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    gender  name.last name.first
## 1    male     wright        ted
## 2    male    schmitt    quentin
## 3  female   johansen      laura
## 4    male    herrero     ismael
## 5  female     blanco     susana
## 6    male     wilson      mason
## 7    male    strauio       lutz
## 8  female     gordon     kaylee
## 9    male limoncuocu     baraek
## 10   male     perrin     basile
## 11   male      lopez      ruben
## 12   male   waisanen   valtteri
## 13 female     brewer    vanessa
## 14 female      brown   kimberly
## 15 female   baettner     loreen
## 16 female    wallace      becky
## 17   male   gonzalez     hector
## 18 female       neva       ella
## 19   male    barnaby      simon
## 20   male      moser        max</code></pre>
</div>
</div>
<p>We can use a minus sign <code>-</code> in front of a vector of indices to instead indicate columns we do not want to return:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">18</span>)]</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    name.first  name.last      school
## 1         ted     wright          UT
## 2     quentin    schmitt          UT
## 3       laura   johansen         A&amp;M
## 4      ismael    herrero         A&amp;M
## 5      susana     blanco          UT
## 6       mason     wilson        Rice
## 7        lutz    strauio  Texas Tech
## 8      kaylee     gordon          UT
## 9      baraek limoncuocu          UT
## 10     basile     perrin Texas State
## 11      ruben      lopez         A&amp;M
## 12   valtteri   waisanen          UT
## 13    vanessa     brewer        Rice
## 14   kimberly      brown          UT
## 15     loreen   baettner         A&amp;M
## 16      becky    wallace  Texas Tech
## 17     hector   gonzalez         A&amp;M
## 18       ella       neva          UT
## 19      simon    barnaby Texas State
## 20        max      moser         A&amp;M</code></pre>
</div>
</div>
</section>
</section>
<section id="factors" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="factors"><span class="header-section-number">7.5</span> Factors</h2>
<p>We were introduced to the <em>factor</em> data class above. Again, factors are numeric codes that <strong><em>R</em></strong> can use internally that correspond to character value “levels”.</p>
<p>When we load in data from an external source (as we do in <a href="08-module.html"><strong>Module 08</strong></a>), {base} <strong><em>R</em></strong> tends to import character string data as factors, assigning to each unique string to an integer numeric code and assigning the string as a “label” for that code. Using factors can make some code run much more quickly (e.g., ANOVA, ANCOVA, and other forms of regression using categorical variables).</p>
</section>
<section id="variable-conversion-and-coercion" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="variable-conversion-and-coercion"><span class="header-section-number">7.6</span> Variable Conversion and Coercion</h2>
<p>You can convert <em>factor</em> to <em>character</em> data (and vice versa) using the <code>as.character()</code> or <code>as.factor()</code> commands. You can also convert/coerce any vector to a different class using similar constructs (e.g., <code>as.numeric()</code>), although not all such conversions are really meaningful. Converting <em>factor</em> data to <em>numeric</em> results in the the converted data having the value of <strong><em>R</em></strong>’s internal numeric code for the factor level, while converting <em>character</em> data to <em>numeric</em> results in the data being coerced into the special data value of <code>NA</code> (see below) for missing data.</p>
</section>
<section id="special-data-values" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="special-data-values"><span class="header-section-number">7.7</span> Special Data Values</h2>
<p>Finally, <strong><em>R</em></strong> has three special data values that it uses in a variety of situations.</p>
<ul>
<li><code>NA</code> (for <strong>not available</strong>) is used for missing data. Many statistical functions offer the possibility to include as an argument <code>na.rm=TRUE</code> (“remove NAs”) so that <code>NA</code>s are excluded from a calculation.</li>
<li><code>Inf</code> (and <code>-Inf</code>) is used when the result of a numerical calculation is too extreme for <strong><em>R</em></strong> to express</li>
<li><code>NaN</code> (for <strong>not a number</strong>) is used when <strong><em>R</em></strong> cannot express the results of a calculation , e.g., when you try to take the square root of a negative number</li>
</ul>
<section id="challenge-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="challenge-1">CHALLENGE</h3>
<ul>
<li>Store the following vector of numbers as a 5 x 3 matrix: 3, 0, 1 ,23, 1, 2, 33, 1, 1, 42, 0, 1, 41, 0, 2</li>
<li>Be sure to fill the matrix <strong>ROWWISE</strong></li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">23</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">33</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">42</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">41</span>, <span class="dv">0</span>, <span class="dv">2</span>), <span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>##      [,1] [,2] [,3]
## [1,]    3    0    1
## [2,]   23    1    2
## [3,]   33    1    1
## [4,]   42    0    1
## [5,]   41    0    2</code></pre>
</details>
</div>
</div>
<ul>
<li>Then, coerce the matrix to a data frame</li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>(d <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(m))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>##   V1 V2 V3
## 1  3  0  1
## 2 23  1  2
## 3 33  1  1
## 4 42  0  1
## 5 41  0  2</code></pre>
</details>
</div>
</div>
<ul>
<li>As a data frame, coerce the second column to be <em>logical</em> (i.e., Boolean)</li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>(d[, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(d[, <span class="dv">2</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>## [1] FALSE  TRUE  TRUE FALSE FALSE</code></pre>
</details>
</div>
</div>
<ul>
<li>As a data frame, coerce the third column to be a <em>factor</em></li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>(d[, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(d[, <span class="dv">3</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<details><summary>Show Output</summary>
<pre class="details" data-summary="Show Output"><code>## [1] 1 2 1 1 2
## Levels: 1 2</code></pre>
</details>
</div>
</div>
<ul>
<li>When you are done, use the <code>str()</code> command to show the data type for each variable in your dataframe.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## 'data.frame':    5 obs. of  3 variables:
##  $ V1: num  3 23 33 42 41
##  $ V2: logi  FALSE TRUE TRUE FALSE FALSE
##  $ V3: Factor w/ 2 levels "1","2": 1 2 1 1 2</code></pre>
</div>
</div>
</section>
</section>
<section id="other-data-frame-like-structures" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="other-data-frame-like-structures"><span class="header-section-number">7.8</span> Other Data Frame-Like Structures</h2>
<section id="data-tables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="data-tables">Data Tables</h3>
<p>A “data table” is a structure introduced in the package {data.table} that provides an enhancements to the data frame structure, which is the standard data structure for storing tabular data in {base} <strong><em>R</em></strong>. We use the same syntax for creating a data table…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>,</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>), <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>))</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>dt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    firstName  community    sex   age
##       &lt;char&gt;     &lt;char&gt; &lt;char&gt; &lt;num&gt;
## 1:      Rick Alexandria      M    42
## 2:     Negan    Saviors      M    40
## 3:    Dwight    Saviors      M    33
## 4:    Maggie     Hiltop      F    28
## 5:  Michonne Alexandria      F    31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## Classes 'data.table' and 'data.frame':   5 obs. of  4 variables:
##  $ firstName: chr  "Rick" "Negan" "Dwight" "Maggie" ...
##  $ community: chr  "Alexandria" "Saviors" "Saviors" "Hiltop" ...
##  $ sex      : chr  "M" "M" "M" "F" ...
##  $ age      : num  42 40 33 28 31
##  - attr(*, ".internal.selfref")=&lt;externalptr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># versus...</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>,</span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>), <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>))</span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   firstName  community sex age
## 1      Rick Alexandria   M  42
## 2     Negan    Saviors   M  40
## 3    Dwight    Saviors   M  33
## 4    Maggie     Hiltop   F  28
## 5  Michonne Alexandria   F  31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## 'data.frame':    5 obs. of  4 variables:
##  $ firstName: chr  "Rick" "Negan" "Dwight" "Maggie" ...
##  $ community: chr  "Alexandria" "Saviors" "Saviors" "Hiltop" ...
##  $ sex      : chr  "M" "M" "M" "F" ...
##  $ age      : num  42 40 33 28 31</code></pre>
</div>
</div>
<p>Note that printing a data table results in a slightly different output than printing a data frame (e.g., row numbers are printed followed by a “:”) and the structure (<code>str()</code>) looks a bit different. Also, different from data frames, when we read in data, columns of <em>character</em> type are never converted to factors by default (i.e., we do not need to specify anything like <code>stringsAsFactors=FALSE</code> when we read in data… that’s the opposite default as we see for data frames).</p>
<p>The big advantage of using data tables over data frames is that they support a different, easier syntax for filtering rows and selecting columns and for grouping output.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>dt[sex <span class="sc">==</span> <span class="st">"M"</span>]  <span class="co"># filter for sex = 'M' in a data table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    firstName  community    sex   age
##       &lt;char&gt;     &lt;char&gt; &lt;char&gt; &lt;num&gt;
## 1:      Rick Alexandria      M    42
## 2:     Negan    Saviors      M    40
## 3:    Dwight    Saviors      M    33</code></pre>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"M"</span>, ]  <span class="co"># filter for sex = 'M' in a data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   firstName  community sex age
## 1      Rick Alexandria   M  42
## 2     Negan    Saviors   M  40
## 3    Dwight    Saviors   M  33</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>dt[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]  <span class="co"># return the first two rows of the data table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##    firstName  community    sex   age
##       &lt;char&gt;     &lt;char&gt; &lt;char&gt; &lt;num&gt;
## 1:      Rick Alexandria      M    42
## 2:     Negan    Saviors      M    40</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]  <span class="co"># return the first two rows of the data table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   firstName  community sex age
## 1      Rick Alexandria   M  42
## 2     Negan    Saviors   M  40</code></pre>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>dt[, sex]  <span class="co"># returns the variable 'sex'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "M" "M" "M" "F" "F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt[, sex])  <span class="co"># sex is a CHARACTER vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  chr [1:5] "M" "M" "M" "F" "F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="fu">c</span>(<span class="st">"sex"</span>)]  <span class="co"># returns the variable 'sex'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "M" "M" "M" "F" "F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[, <span class="fu">c</span>(<span class="st">"sex"</span>)])  <span class="co"># sex is a FACTOR with 2 levels</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  chr [1:5] "M" "M" "M" "F" "F"</code></pre>
</div>
</div>
<p>The data table structure also allows us more straightforward syntax - and implements much faster algorithms - for computations on columns and for perform aggregations of data by a grouping variable.</p>
</section>
<section id="tibbles" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="tibbles">“Tibbles”</h3>
<p>A “tibble” is another newer take on the data frame structure, implemented in the package {tibble} (which is loaded as part of {tidyverse}). The structure was created to keep the best features of data frames and correct some of the more frustrating aspects associated with the older structure. For example, like data tables, tibbles do not by default change the input type of a variable from <em>character</em> to <em>factor</em> when the tibble is created.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>), <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>,</span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>))</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 5 × 4
##   firstName community  sex     age
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt;
## 1 Rick      Alexandria M        42
## 2 Negan     Saviors    M        40
## 3 Dwight    Saviors    M        33
## 4 Maggie    Hiltop     F        28
## 5 Michonne  Alexandria F        31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## tibble [5 × 4] (S3: tbl_df/tbl/data.frame)
##  $ firstName: chr [1:5] "Rick" "Negan" "Dwight" "Maggie" ...
##  $ community: chr [1:5] "Alexandria" "Saviors" "Saviors" "Hiltop" ...
##  $ sex      : chr [1:5] "M" "M" "M" "F" ...
##  $ age      : num [1:5] 42 40 33 28 31</code></pre>
</div>
</div>
<p>Note that the output of printing a tibble again looks slightly different than that for data frames or data tables… e.g., the data type of each column is included in the header row, for example. <code>str()</code> also shows us that characters were not converted to factors.</p>
<p>Additionally, subsetting tibbles with the single bracket operator (<code>[ ]</code>) always returns a tibble, whereas doing the same with a data frame can return either a data frame or a vector.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>t[, <span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 5 × 1
##     age
##   &lt;dbl&gt;
## 1    42
## 2    40
## 3    33
## 4    28
## 5    31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(t[, <span class="st">"age"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 42 40 33 28 31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df[, <span class="st">"age"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "numeric"</code></pre>
</div>
</div>
<p>There are some other subtle differences regarding the behavior of tibbles versus data frames that are also worthwhile to note. Data frames support “partial matching” in variable names when the <code>$</code> operator is used, thus <code>df$a</code> will return the variable <code>df$age</code>. Tibbles are stricter and will never do partial matching.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>a  <span class="co"># returns df$age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 42 40 33 28 31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>a  <span class="co"># returns NULL and gives a warning</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>## Warning: Unknown or uninitialised column: `a`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>## NULL</code></pre>
</div>
</div>
<p>Finally, tibbles are careful about recycling. When creating a tibble, columns have to have consistent lengths and only values of length 1 are recycled. Thus, in the following…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">c =</span> <span class="dv">1</span>)</span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this works fine... c is recycled</span></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 4 × 2
##       a     c
##   &lt;int&gt; &lt;dbl&gt;
## 1     1     1
## 2     2     1
## 3     3     1
## 4     4     1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t &lt;- tibble(a=1:4, c=1:2) but this would throw an error... c is not recycled</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co"># even though it could fit evenly into the number of rows</span></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">c =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   a c
## 1 1 1
## 2 2 2
## 3 3 1
## 4 4 2</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># | include: false</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>tidyverse)</span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="concept-review" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="concept-review">Concept Review</h2>
<ul>
<li>Creating matrices and arrays: <code>matrix(data=, nrow=, ncol=, byrow=)</code>, <code>array(data=, dim=)</code>, <code>rbind()</code>, <code>cbind()</code></li>
<li>Creating lists: <code>list()</code></li>
<li>Creating data frames: <code>data.frame()</code></li>
<li>Subsetting: single bracket (<code>[ ]</code>), double bracket (<code>[[ ]]</code>), and <code>$</code> notation</li>
<li>Variable coercion: <code>as.numeric()</code>, <code>as.character()</code>, <code>as.data.frame()</code></li>
<li>Reading .csv data: <code>read.csv(file=, header=, stringsAsFactors=)</code></li>
<li>Filtering rows of a data frame using {base} <strong><em>R</em></strong>: <code>df[df$&lt;variable name&gt; == "&lt;criterion&gt;", ]</code>, <code>df[df[["&lt;variable name&gt;"]] == "&lt;criterion&gt;", ]</code></li>
<li>Selecting/excluding columns of a data frame: <code>df[ , c("&lt;variable name 1&gt;", "&lt;variable name 2&gt;",...)]</code>,<code>df[ , c(&lt;column index 1&gt;, &lt;column index 2&gt;,...)]</code></li>
</ul>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./06-module.html" class="pagination-link  aria-label=" &lt;span="" research&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducible Research</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./08-module.html" class="pagination-link" aria-label="<span class='chapter-number'>8</span>&nbsp; <span class='chapter-title'>Getting Data into ***R***</span>">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb212" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Additional Data Structures in ***R*** {#module-07}</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Objectives</span></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; The objective of this module is to introduce additional fundamental data structures in ***R*** (matrices, arrays, lists, data frames, and the like) and to learn how to extract, filter, and subset data from them.</span></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preliminaries</span></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>GO TO: <span class="ot">&lt;https://github.com/difiore/ada-datasets&gt;</span>, select the "random-people.csv" file, then press the "Download" button and save the file to your local computer (e.g., on your desktop).</span>
<span id="cb212-10"><a href="#cb212-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-13"><a href="#cb212-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-14"><a href="#cb212-14" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb212-15"><a href="#cb212-15" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "80%"</span></span>
<span id="cb212-16"><a href="#cb212-16" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/download-file.png"</span>)</span>
<span id="cb212-17"><a href="#cb212-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-18"><a href="#cb212-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-19"><a href="#cb212-19" aria-hidden="true" tabindex="-1"></a>Alternatively, you can press the "Raw" button, highlight, and copy the text to a text editor, and save it. ***RStudio***, as we have seen, has a powerful built-in text editor. There are also a number of other excellent text editors that you download for FREE (e.g., [***BBEdit***](https://www.barebones.com/products/bbedit/) for MacOS, [***Notepad++***](https://notepad-plus-plus.org/) for Windows, or [***Visual Studio Code***](https://code.visualstudio.com/) for either operating system).</span>
<span id="cb212-20"><a href="#cb212-20" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Install and load these packages in ***R***: <span class="co">[</span><span class="ot">{tidyverse}</span><span class="co">](https://cran.r-project.org/web/packages/tidyverse/tidyverse.pdf)</span> (which includes {ggplot2}, {dplyr}, {readr}, {tibble}, and {tidyr}, plus others, so they do not need to be installed separately) and <span class="co">[</span><span class="ot">{data.table}</span><span class="co">](https://cran.r-project.org/web/packages/data.table/data.table.pdf)</span></span>
<span id="cb212-21"><a href="#cb212-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-24"><a href="#cb212-24" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-25"><a href="#cb212-25" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb212-26"><a href="#cb212-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb212-27"><a href="#cb212-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb212-28"><a href="#cb212-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb212-29"><a href="#cb212-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-30"><a href="#cb212-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-31"><a href="#cb212-31" aria-hidden="true" tabindex="-1"></a><span class="fu">## Matrices and Arrays</span></span>
<span id="cb212-32"><a href="#cb212-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-33"><a href="#cb212-33" aria-hidden="true" tabindex="-1"></a>So far, we have seen several way of creating **vectors**, which are the most fundamental data structures in ***R***. Today, we will explore and learn how to manipulate other fundamental data structures, including **matrices**, **arrays**, **lists**, and **data frames**, as well as variants on data frames (e.g., **data tables** and **"tibbles"**.)</span>
<span id="cb212-34"><a href="#cb212-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-35"><a href="#cb212-35" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** The kind of vectors we have been talking about so far are also sometimes referred to as *atomic vectors*, and all of the elements of a vector have to have the same data type. We can think of **lists** (see below) as a different kind of vector, where the elements can have different types, but I prefer to consider lists as a different kind of data structure. Wickham (2019) *Advanced R, Second Edition* discusses the nuances of various ***R*** data structures in more detail.</span></span>
<span id="cb212-36"><a href="#cb212-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-37"><a href="#cb212-37" aria-hidden="true" tabindex="-1"></a>Matrices and arrays are extensions of the basic vector data structure, and like vectors, all of the elements in an array or matrix have to be of the same atomic type.</span>
<span id="cb212-38"><a href="#cb212-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-39"><a href="#cb212-39" aria-hidden="true" tabindex="-1"></a>We can think of a **matrix** as a *two-dimensional* structure consisting of several atomic vectors stored together, but, more accurately, a matrix is essentially a single atomic vector that is split either into multiple columns or multiple rows of the same length. Matrices are useful constructs for performing many mathematical and statistical operations. Again, like 1-dimensional atomic vectors, matrices can only store data of one atomic class (e.g., *numerical* or *character*). Matrices are created using the <span class="in">`matrix()`</span> function.</span>
<span id="cb212-40"><a href="#cb212-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-43"><a href="#cb212-43" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-44"><a href="#cb212-44" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb212-45"><a href="#cb212-45" aria-hidden="true" tabindex="-1"></a>            <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb212-46"><a href="#cb212-46" aria-hidden="true" tabindex="-1"></a>            <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb212-47"><a href="#cb212-47" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb212-48"><a href="#cb212-48" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-49"><a href="#cb212-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-50"><a href="#cb212-50" aria-hidden="true" tabindex="-1"></a>Matrices are typically filled column-wise, with the argument, <span class="in">`byrow=`</span>, set to FALSE by default (note that FALSE is not in quotation marks). This means that the first column of the matrix will be filled first, the second column second, etc.</span>
<span id="cb212-51"><a href="#cb212-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-54"><a href="#cb212-54" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-55"><a href="#cb212-55" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb212-56"><a href="#cb212-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb212-57"><a href="#cb212-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb212-58"><a href="#cb212-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb212-59"><a href="#cb212-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">byrow =</span> <span class="cn">FALSE</span></span>
<span id="cb212-60"><a href="#cb212-60" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb212-61"><a href="#cb212-61" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb212-62"><a href="#cb212-62" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-63"><a href="#cb212-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-64"><a href="#cb212-64" aria-hidden="true" tabindex="-1"></a>This pattern can be changed by specifying the <span class="in">`byrow=`</span> argument as TRUE.</span>
<span id="cb212-65"><a href="#cb212-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-68"><a href="#cb212-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-69"><a href="#cb212-69" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb212-70"><a href="#cb212-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb212-71"><a href="#cb212-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb212-72"><a href="#cb212-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb212-73"><a href="#cb212-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb212-74"><a href="#cb212-74" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb212-75"><a href="#cb212-75" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb212-76"><a href="#cb212-76" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-77"><a href="#cb212-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-78"><a href="#cb212-78" aria-hidden="true" tabindex="-1"></a>You can also create matrices by *binding* vectors of the same length together either row-wise (with the function <span class="in">`rbind()`</span>) or column-wise (with the function <span class="in">`cbind()`</span>).</span>
<span id="cb212-79"><a href="#cb212-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-82"><a href="#cb212-82" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-83"><a href="#cb212-83" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb212-84"><a href="#cb212-84" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb212-85"><a href="#cb212-85" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(v1, v2)</span>
<span id="cb212-86"><a href="#cb212-86" aria-hidden="true" tabindex="-1"></a>m1</span>
<span id="cb212-87"><a href="#cb212-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-88"><a href="#cb212-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-91"><a href="#cb212-91" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-92"><a href="#cb212-92" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(v1, v2)</span>
<span id="cb212-93"><a href="#cb212-93" aria-hidden="true" tabindex="-1"></a>m2</span>
<span id="cb212-94"><a href="#cb212-94" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-95"><a href="#cb212-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-96"><a href="#cb212-96" aria-hidden="true" tabindex="-1"></a>Standard metadata about a matrix can be extracted using the <span class="in">`class()`</span>, <span class="in">`dim()`</span>, <span class="in">`names()`</span>, <span class="in">`rownames()`</span>, <span class="in">`colnames()`</span> and other commands. The <span class="in">`dim()`</span> command returns an vector containing the number of rows at index position 1 and the number of columns at index position 2.</span>
<span id="cb212-97"><a href="#cb212-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-100"><a href="#cb212-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-101"><a href="#cb212-101" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m1)</span>
<span id="cb212-102"><a href="#cb212-102" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m2)</span>
<span id="cb212-103"><a href="#cb212-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-104"><a href="#cb212-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-107"><a href="#cb212-107" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-108"><a href="#cb212-108" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(m1)</span>
<span id="cb212-109"><a href="#cb212-109" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(m2)</span>
<span id="cb212-110"><a href="#cb212-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-111"><a href="#cb212-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-114"><a href="#cb212-114" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-115"><a href="#cb212-115" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m1)</span>
<span id="cb212-116"><a href="#cb212-116" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m1)</span>
<span id="cb212-117"><a href="#cb212-117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-118"><a href="#cb212-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-119"><a href="#cb212-119" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** In this example, `colnames` are not defined for **m1** since </span><span class="in">`rbind()`</span><span class="at"> was used to create the matrix.</span></span>
<span id="cb212-120"><a href="#cb212-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-123"><a href="#cb212-123" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-124"><a href="#cb212-124" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m2)</span>
<span id="cb212-125"><a href="#cb212-125" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m2)</span>
<span id="cb212-126"><a href="#cb212-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-127"><a href="#cb212-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-128"><a href="#cb212-128" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** Similarly, in this example, `rownames` are not defined for **m2**, since </span><span class="in">`cbind()`</span><span class="at"> was used to create the matrix.</span></span>
<span id="cb212-129"><a href="#cb212-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-130"><a href="#cb212-130" aria-hidden="true" tabindex="-1"></a>As we saw with vectors, the *structure* (`str()`) and *glimpse* (<span class="in">`dplyr::glimpse()`</span>) commands can be applied to any data structure to provide details about that object. These are incredibly useful functions that you will find yourself using over and over again.</span>
<span id="cb212-131"><a href="#cb212-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-134"><a href="#cb212-134" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-135"><a href="#cb212-135" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(m1)</span>
<span id="cb212-136"><a href="#cb212-136" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(m2)</span>
<span id="cb212-137"><a href="#cb212-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-138"><a href="#cb212-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-139"><a href="#cb212-139" aria-hidden="true" tabindex="-1"></a>The *attributes* (<span class="in">`attributes()`</span>) command can be used to list the attributes of a data structure.</span>
<span id="cb212-140"><a href="#cb212-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-143"><a href="#cb212-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-144"><a href="#cb212-144" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(m1)</span>
<span id="cb212-145"><a href="#cb212-145" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1,<span class="at">which=</span><span class="st">"dim"</span>)</span>
<span id="cb212-146"><a href="#cb212-146" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1,<span class="at">which=</span><span class="st">"dimnames"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb212-147"><a href="#cb212-147" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1,<span class="at">which=</span><span class="st">"dimnames"</span>)[[<span class="dv">2</span>]]</span>
<span id="cb212-148"><a href="#cb212-148" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-149"><a href="#cb212-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-150"><a href="#cb212-150" aria-hidden="true" tabindex="-1"></a>An **array** is a more general atomic data structure, of which a vector (with 1 implicit dimension) and a matrix (with 2 defined dimensions) are but examples. Arrays can include additional dimensions, but (like vectors and matrices) they can only include elements that are all of the same atomic data class (e.g., <span class="in">`numeric`</span>, <span class="in">`character`</span>). The example below shows the construction of a 3 dimensional array with 5 rows, 6 columns, and 3 "levels"). Visualizing higher and higher dimension arrays, obviously, becomes challenging!</span>
<span id="cb212-151"><a href="#cb212-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-154"><a href="#cb212-154" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-155"><a href="#cb212-155" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">90</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">3</span>))</span>
<span id="cb212-156"><a href="#cb212-156" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb212-157"><a href="#cb212-157" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-158"><a href="#cb212-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-159"><a href="#cb212-159" aria-hidden="true" tabindex="-1"></a><span class="fu">### Subsetting {.unnumbered}</span></span>
<span id="cb212-160"><a href="#cb212-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-161"><a href="#cb212-161" aria-hidden="true" tabindex="-1"></a>You can reference or extract select elements from vectors, matrices, and arrays by *subsetting* them using their index position(s) in what is knows as **bracket notation** (<span class="in">`[ ]`</span>). For vectors, you would specify an index value in one dimension. For matrices, you would give the index values in two dimensions. For arrays generally, you would give index values for each dimension in the array.</span>
<span id="cb212-162"><a href="#cb212-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-163"><a href="#cb212-163" aria-hidden="true" tabindex="-1"></a>For example, suppose you have the following vector:</span>
<span id="cb212-164"><a href="#cb212-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-167"><a href="#cb212-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-168"><a href="#cb212-168" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb212-169"><a href="#cb212-169" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb212-170"><a href="#cb212-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-171"><a href="#cb212-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-172"><a href="#cb212-172" aria-hidden="true" tabindex="-1"></a>You can select the first 15 elements using bracket notation as follows:</span>
<span id="cb212-173"><a href="#cb212-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-176"><a href="#cb212-176" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-177"><a href="#cb212-177" aria-hidden="true" tabindex="-1"></a>v[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>]</span>
<span id="cb212-178"><a href="#cb212-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-179"><a href="#cb212-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-180"><a href="#cb212-180" aria-hidden="true" tabindex="-1"></a>You can also supply a vector of index values as the argument to <span class="in">`[ ]`</span> to use for subsetting:</span>
<span id="cb212-181"><a href="#cb212-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-184"><a href="#cb212-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-185"><a href="#cb212-185" aria-hidden="true" tabindex="-1"></a>v[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)]</span>
<span id="cb212-186"><a href="#cb212-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-187"><a href="#cb212-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-188"><a href="#cb212-188" aria-hidden="true" tabindex="-1"></a>Similarly, you can also use a function or a calculation to subset a vector. What does the following return?</span>
<span id="cb212-189"><a href="#cb212-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-192"><a href="#cb212-192" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-193"><a href="#cb212-193" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">200</span></span>
<span id="cb212-194"><a href="#cb212-194" aria-hidden="true" tabindex="-1"></a>v[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span>
<span id="cb212-195"><a href="#cb212-195" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-196"><a href="#cb212-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-197"><a href="#cb212-197" aria-hidden="true" tabindex="-1"></a>As an example for a matrix, suppose you have the following:</span>
<span id="cb212-198"><a href="#cb212-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-201"><a href="#cb212-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-202"><a href="#cb212-202" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>, <span class="at">nrow=</span><span class="dv">8</span>, <span class="at">ncol=</span><span class="dv">10</span>, <span class="at">byrow=</span><span class="cn">FALSE</span>)</span>
<span id="cb212-203"><a href="#cb212-203" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb212-204"><a href="#cb212-204" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-205"><a href="#cb212-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-206"><a href="#cb212-206" aria-hidden="true" tabindex="-1"></a>You can extract the element in row 4, column 5 and assign it to a new variable, **x**, as follows:</span>
<span id="cb212-207"><a href="#cb212-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-210"><a href="#cb212-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-211"><a href="#cb212-211" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb212-212"><a href="#cb212-212" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb212-213"><a href="#cb212-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-214"><a href="#cb212-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-215"><a href="#cb212-215" aria-hidden="true" tabindex="-1"></a>You can also extract an entire row or an entire column (or set of rows or set of columns) from a matrix by specifying the desired row or column number(s) and leaving the other value blank.</span>
<span id="cb212-216"><a href="#cb212-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-219"><a href="#cb212-219" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-220"><a href="#cb212-220" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">4</span>, ] <span class="co"># extracts 4th row</span></span>
<span id="cb212-221"><a href="#cb212-221" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb212-222"><a href="#cb212-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-223"><a href="#cb212-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-224"><a href="#cb212-224" aria-hidden="true" tabindex="-1"></a><span class="fu">### CHALLENGE {.unnumbered}</span></span>
<span id="cb212-225"><a href="#cb212-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-226"><a href="#cb212-226" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Given the matrix, **m**, above, extract the 2nd, 3rd, and 6th columns and assign them to the variable **x**</span>
<span id="cb212-227"><a href="#cb212-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-230"><a href="#cb212-230" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-231"><a href="#cb212-231" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb212-232"><a href="#cb212-232" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb212-233"><a href="#cb212-233" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb212-234"><a href="#cb212-234" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">6</span>)]</span>
<span id="cb212-235"><a href="#cb212-235" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb212-236"><a href="#cb212-236" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-237"><a href="#cb212-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-238"><a href="#cb212-238" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Given the matrix, **m**, above, extract the 6th to 8th row and assign them to the variable **x**</span>
<span id="cb212-239"><a href="#cb212-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-242"><a href="#cb212-242" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-243"><a href="#cb212-243" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb212-244"><a href="#cb212-244" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb212-245"><a href="#cb212-245" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb212-246"><a href="#cb212-246" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>, ]</span>
<span id="cb212-247"><a href="#cb212-247" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb212-248"><a href="#cb212-248" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-249"><a href="#cb212-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-250"><a href="#cb212-250" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Given the matrix, **m**, above, extract the elements from row 2, column 2 to row 6, column 9 and assign them to the variable **x**</span>
<span id="cb212-251"><a href="#cb212-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-254"><a href="#cb212-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-255"><a href="#cb212-255" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb212-256"><a href="#cb212-256" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb212-257"><a href="#cb212-257" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb212-258"><a href="#cb212-258" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>]</span>
<span id="cb212-259"><a href="#cb212-259" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb212-260"><a href="#cb212-260" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-261"><a href="#cb212-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-262"><a href="#cb212-262" aria-hidden="true" tabindex="-1"></a><span class="fu">### Overwriting Elements {.unnumbered}</span></span>
<span id="cb212-263"><a href="#cb212-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-264"><a href="#cb212-264" aria-hidden="true" tabindex="-1"></a>You can replace elements in a vector or matrix, or even entire rows or columns, by identifying the elements to be replaced and then assigning them new values.</span>
<span id="cb212-265"><a href="#cb212-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-266"><a href="#cb212-266" aria-hidden="true" tabindex="-1"></a>Starting with the matrix, **m**, defined above, explore what will be the effects of operations below. Pay careful attention to row and column index values, vector recycling, and automated conversion/recasting among data classes.</span>
<span id="cb212-267"><a href="#cb212-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-270"><a href="#cb212-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-271"><a href="#cb212-271" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">7</span>, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">564</span></span>
<span id="cb212-272"><a href="#cb212-272" aria-hidden="true" tabindex="-1"></a>m[ ,<span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb212-273"><a href="#cb212-273" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb212-274"><a href="#cb212-274" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">19</span>, <span class="dv">18</span>, <span class="dv">17</span>)</span>
<span id="cb212-275"><a href="#cb212-275" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb212-276"><a href="#cb212-276" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">c</span>(<span class="dv">20</span><span class="sc">:</span><span class="dv">1</span>),</span>
<span id="cb212-277"><a href="#cb212-277" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">4</span>,</span>
<span id="cb212-278"><a href="#cb212-278" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">5</span>,</span>
<span id="cb212-279"><a href="#cb212-279" aria-hidden="true" tabindex="-1"></a>  <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb212-280"><a href="#cb212-280" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb212-281"><a href="#cb212-281" aria-hidden="true" tabindex="-1"></a>m[ ,<span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>)</span>
<span id="cb212-282"><a href="#cb212-282" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-283"><a href="#cb212-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-284"><a href="#cb212-284" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lists and Data Frames</span></span>
<span id="cb212-285"><a href="#cb212-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-286"><a href="#cb212-286" aria-hidden="true" tabindex="-1"></a>Unlike vectors, matrices, and arrays, two other data structures - **lists** and **data frames** - can be used to group together a heterogeneous mix of ***R*** structures and objects. A single list, for example, could contain a matrix, vector of character strings, vector of factors, an array, even another list.</span>
<span id="cb212-287"><a href="#cb212-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-288"><a href="#cb212-288" aria-hidden="true" tabindex="-1"></a>**Lists** are created using the <span class="in">`list()`</span> function where the elements to add to the list are given as arguments to the function, separated by commas. Type in the following example:</span>
<span id="cb212-289"><a href="#cb212-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-292"><a href="#cb212-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-293"><a href="#cb212-293" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"this"</span>, <span class="st">"is"</span>, <span class="st">"a"</span>, <span class="st">"vector"</span>, <span class="st">"of"</span>, <span class="st">"strings"</span>)</span>
<span id="cb212-294"><a href="#cb212-294" aria-hidden="true" tabindex="-1"></a><span class="co"># this is a vector of character strings</span></span>
<span id="cb212-295"><a href="#cb212-295" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>, <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">8</span>) <span class="co"># this is a matrix</span></span>
<span id="cb212-296"><a href="#cb212-296" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="cn">FALSE</span> <span class="co"># this is a boolean variable</span></span>
<span id="cb212-297"><a href="#cb212-297" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(s, m, b)</span>
<span id="cb212-298"><a href="#cb212-298" aria-hidden="true" tabindex="-1"></a>l</span>
<span id="cb212-299"><a href="#cb212-299" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-300"><a href="#cb212-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-301"><a href="#cb212-301" aria-hidden="true" tabindex="-1"></a><span class="fu">### Subsetting Lists {.unnumbered}</span></span>
<span id="cb212-302"><a href="#cb212-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-303"><a href="#cb212-303" aria-hidden="true" tabindex="-1"></a>You can reference or extract elements from a list similarly to how you would from other data structure, except that you use **double brackets** (<span class="in">`[[ ]]`</span>) to reference a single element in the list.</span>
<span id="cb212-304"><a href="#cb212-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-307"><a href="#cb212-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-308"><a href="#cb212-308" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]]</span>
<span id="cb212-309"><a href="#cb212-309" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-310"><a href="#cb212-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-311"><a href="#cb212-311" aria-hidden="true" tabindex="-1"></a>An extension of this notation can be used to access elements contained *within* an element in the list. For example:</span>
<span id="cb212-312"><a href="#cb212-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-315"><a href="#cb212-315" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-316"><a href="#cb212-316" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">2</span>, <span class="dv">6</span>]</span>
<span id="cb212-317"><a href="#cb212-317" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">2</span>, ]</span>
<span id="cb212-318"><a href="#cb212-318" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][ ,<span class="dv">6</span>]</span>
<span id="cb212-319"><a href="#cb212-319" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-320"><a href="#cb212-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-321"><a href="#cb212-321" aria-hidden="true" tabindex="-1"></a>To reference or extract multiple elements from a list, you would use **single bracket** (<span class="in">`[ ]`</span>) notation, which would itself return a list. This is called "list slicing".</span>
<span id="cb212-322"><a href="#cb212-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-325"><a href="#cb212-325" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-326"><a href="#cb212-326" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb212-327"><a href="#cb212-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-328"><a href="#cb212-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-331"><a href="#cb212-331" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-332"><a href="#cb212-332" aria-hidden="true" tabindex="-1"></a>l[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span>
<span id="cb212-333"><a href="#cb212-333" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-334"><a href="#cb212-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-335"><a href="#cb212-335" aria-hidden="true" tabindex="-1"></a>Using <span class="in">`class()`</span> and <span class="in">`str()`</span> (or <span class="in">`dplyr::glimpse()`</span>) provides details about the our list and its three elements:</span>
<span id="cb212-336"><a href="#cb212-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-339"><a href="#cb212-339" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-340"><a href="#cb212-340" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(l)</span>
<span id="cb212-341"><a href="#cb212-341" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l)</span>
<span id="cb212-342"><a href="#cb212-342" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(l)</span>
<span id="cb212-343"><a href="#cb212-343" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-344"><a href="#cb212-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-345"><a href="#cb212-345" aria-hidden="true" tabindex="-1"></a>You can *name* the elements in a list using the <span class="in">`names()`</span> function, which adds a name attribute to each list item.</span>
<span id="cb212-346"><a href="#cb212-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-349"><a href="#cb212-349" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-350"><a href="#cb212-350" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(l) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"string"</span>, <span class="st">"matrix"</span>, <span class="st">"logical"</span>)</span>
<span id="cb212-351"><a href="#cb212-351" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(l)</span>
<span id="cb212-352"><a href="#cb212-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-353"><a href="#cb212-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-354"><a href="#cb212-354" aria-hidden="true" tabindex="-1"></a>You can also use the name of an item in the list to refer to it using the shortcut <span class="in">`$`</span> notation. This is the equivalent of using <span class="in">`[[ ]]`</span> with either the column number or the name of the column in quotation marks as the argument inside of the double bracket.</span>
<span id="cb212-355"><a href="#cb212-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-358"><a href="#cb212-358" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-359"><a href="#cb212-359" aria-hidden="true" tabindex="-1"></a><span class="co"># all of the following are equivalent!</span></span>
<span id="cb212-360"><a href="#cb212-360" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>string</span>
<span id="cb212-361"><a href="#cb212-361" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">1</span>]]</span>
<span id="cb212-362"><a href="#cb212-362" aria-hidden="true" tabindex="-1"></a>l[[<span class="st">"string"</span>]]</span>
<span id="cb212-363"><a href="#cb212-363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-364"><a href="#cb212-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-367"><a href="#cb212-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-368"><a href="#cb212-368" aria-hidden="true" tabindex="-1"></a><span class="co"># all of the following are equivalent</span></span>
<span id="cb212-369"><a href="#cb212-369" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>matrix[<span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb212-370"><a href="#cb212-370" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb212-371"><a href="#cb212-371" aria-hidden="true" tabindex="-1"></a>l[[<span class="st">"matrix"</span>]][<span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb212-372"><a href="#cb212-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-373"><a href="#cb212-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-374"><a href="#cb212-374" aria-hidden="true" tabindex="-1"></a>The **data frame** is the perhaps the most useful (and most familiar) data structure that we can operate with in ***R*** as it most closely aligns with how we tend to represent tabular data, with rows as *cases* or *observations* and columns as *variables* describing those observations (e.g., a measurement of a particular type). Variables tend to be measured using the same units and thus fall into the same data class and can be thought of as analogous to vectors, so a data frame is essentially a list of atomic vectors that all have the same length.</span>
<span id="cb212-375"><a href="#cb212-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-376"><a href="#cb212-376" aria-hidden="true" tabindex="-1"></a>The <span class="in">`data.frame()`</span> command can be used to create data frames from scratch.</span>
<span id="cb212-377"><a href="#cb212-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-380"><a href="#cb212-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-381"><a href="#cb212-381" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb212-382"><a href="#cb212-382" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb212-383"><a href="#cb212-383" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb212-384"><a href="#cb212-384" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb212-385"><a href="#cb212-385" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb212-386"><a href="#cb212-386" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb212-387"><a href="#cb212-387" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb212-388"><a href="#cb212-388" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb212-389"><a href="#cb212-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-390"><a href="#cb212-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-391"><a href="#cb212-391" aria-hidden="true" tabindex="-1"></a>More commonly we read tabular data into ***R*** from some external data source (see [**Module 08**](#module-08), which typically results in the table being represented as a data frame. The following code, for example, will read from the file "random-people.csv" stored in a folder called "data" (a <span class="in">`data/`</span> directory) located inside a user's working directory.</span>
<span id="cb212-392"><a href="#cb212-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-395"><a href="#cb212-395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-396"><a href="#cb212-396" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb212-397"><a href="#cb212-397" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read.csv</span>(</span>
<span id="cb212-398"><a href="#cb212-398" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"data/random-people.csv"</span>,</span>
<span id="cb212-399"><a href="#cb212-399" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">","</span>,</span>
<span id="cb212-400"><a href="#cb212-400" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb212-401"><a href="#cb212-401" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb212-402"><a href="#cb212-402" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb212-403"><a href="#cb212-403" aria-hidden="true" tabindex="-1"></a><span class="co"># only print select columns of this data frame</span></span>
<span id="cb212-404"><a href="#cb212-404" aria-hidden="true" tabindex="-1"></a><span class="co"># head() means we will also only print the first several rows</span></span>
<span id="cb212-405"><a href="#cb212-405" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">11</span>, <span class="dv">12</span>)])</span>
<span id="cb212-406"><a href="#cb212-406" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-407"><a href="#cb212-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-408"><a href="#cb212-408" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** To run the example code above, you may need to replace the string in </span><span class="in">`file = "&lt;string&gt;"`</span><span class="at"> with the path to where you stored the file on your local computer.</span></span>
<span id="cb212-409"><a href="#cb212-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-412"><a href="#cb212-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-413"><a href="#cb212-413" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span>
<span id="cb212-414"><a href="#cb212-414" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(df)</span>
<span id="cb212-415"><a href="#cb212-415" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-416"><a href="#cb212-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-417"><a href="#cb212-417" aria-hidden="true" tabindex="-1"></a>As for other data structures, you can select and subset data frames using **single bracket notation** (`[ ]`). You can also select named columns from a data frame using the `$` operator or the equivalent **double bracket notation** (<span class="in">`[[ ]]`</span>).</span>
<span id="cb212-418"><a href="#cb212-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-421"><a href="#cb212-421" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-422"><a href="#cb212-422" aria-hidden="true" tabindex="-1"></a><span class="co"># single bracket notation</span></span>
<span id="cb212-423"><a href="#cb212-423" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">4</span>]</span>
<span id="cb212-424"><a href="#cb212-424" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[, <span class="dv">4</span>])</span>
<span id="cb212-425"><a href="#cb212-425" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column 4</span></span>
<span id="cb212-426"><a href="#cb212-426" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-427"><a href="#cb212-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-428"><a href="#cb212-428" aria-hidden="true" tabindex="-1"></a>The following are all equivalent...</span>
<span id="cb212-429"><a href="#cb212-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-432"><a href="#cb212-432" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-433"><a href="#cb212-433" aria-hidden="true" tabindex="-1"></a><span class="co"># using the $ operator with the column name</span></span>
<span id="cb212-434"><a href="#cb212-434" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>name.last</span>
<span id="cb212-435"><a href="#cb212-435" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df<span class="sc">$</span>name.last)</span>
<span id="cb212-436"><a href="#cb212-436" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column `name.last`</span></span>
<span id="cb212-437"><a href="#cb212-437" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-438"><a href="#cb212-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-441"><a href="#cb212-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-442"><a href="#cb212-442" aria-hidden="true" tabindex="-1"></a><span class="co"># using double bracket notation and a column index</span></span>
<span id="cb212-443"><a href="#cb212-443" aria-hidden="true" tabindex="-1"></a>df[[<span class="dv">4</span>]]</span>
<span id="cb212-444"><a href="#cb212-444" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[[<span class="dv">4</span>]])</span>
<span id="cb212-445"><a href="#cb212-445" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column 4</span></span>
<span id="cb212-446"><a href="#cb212-446" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-447"><a href="#cb212-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-450"><a href="#cb212-450" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-451"><a href="#cb212-451" aria-hidden="true" tabindex="-1"></a><span class="co"># using double bracket notation with the column name</span></span>
<span id="cb212-452"><a href="#cb212-452" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"name.last"</span>]]</span>
<span id="cb212-453"><a href="#cb212-453" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[[<span class="st">"name.last"</span>]])</span>
<span id="cb212-454"><a href="#cb212-454" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column `name.last`</span></span>
<span id="cb212-455"><a href="#cb212-455" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-456"><a href="#cb212-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-457"><a href="#cb212-457" aria-hidden="true" tabindex="-1"></a>Note that the following return data structures that are *not quite the same* as those returned above. Instead, these return **data frames** rather than **vectors**!</span>
<span id="cb212-458"><a href="#cb212-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-461"><a href="#cb212-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-462"><a href="#cb212-462" aria-hidden="true" tabindex="-1"></a><span class="co"># using single bracket notation with a column index and no row index</span></span>
<span id="cb212-463"><a href="#cb212-463" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[<span class="dv">4</span>])</span>
<span id="cb212-464"><a href="#cb212-464" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[<span class="dv">4</span>])</span>
<span id="cb212-465"><a href="#cb212-465" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame of the data from column 4</span></span>
<span id="cb212-466"><a href="#cb212-466" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-467"><a href="#cb212-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-470"><a href="#cb212-470" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-471"><a href="#cb212-471" aria-hidden="true" tabindex="-1"></a><span class="co"># using single bracket notation with a column name</span></span>
<span id="cb212-472"><a href="#cb212-472" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[<span class="st">"name.last"</span>])</span>
<span id="cb212-473"><a href="#cb212-473" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[<span class="st">"name.last"</span>])</span>
<span id="cb212-474"><a href="#cb212-474" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame of the data from column `name.last`</span></span>
<span id="cb212-475"><a href="#cb212-475" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-476"><a href="#cb212-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-477"><a href="#cb212-477" aria-hidden="true" tabindex="-1"></a>As with matrixes, you can add rows (additional cases) or columns (additional variables) to a data frame using <span class="in">`rbind()`</span> and <span class="in">`cbind()`</span>.</span>
<span id="cb212-478"><a href="#cb212-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-481"><a href="#cb212-481" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-482"><a href="#cb212-482" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df, <span class="at">id=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>))</span>
<span id="cb212-483"><a href="#cb212-483" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df, <span class="at">school=</span><span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>))</span>
<span id="cb212-484"><a href="#cb212-484" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb212-485"><a href="#cb212-485" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-486"><a href="#cb212-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-487"><a href="#cb212-487" aria-hidden="true" tabindex="-1"></a>Alternatively, you can extend a data frame by adding a new variable directly using the <span class="in">`$`</span> operator, like this:</span>
<span id="cb212-488"><a href="#cb212-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-491"><a href="#cb212-491" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-492"><a href="#cb212-492" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>school <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>)</span>
<span id="cb212-493"><a href="#cb212-493" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb212-494"><a href="#cb212-494" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-495"><a href="#cb212-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-496"><a href="#cb212-496" aria-hidden="true" tabindex="-1"></a>Using the <span class="in">`[[ ]]`</span> operator with a new variable name in quotation marks works, too:</span>
<span id="cb212-497"><a href="#cb212-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-500"><a href="#cb212-500" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-501"><a href="#cb212-501" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"school"</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>,  <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>)</span>
<span id="cb212-502"><a href="#cb212-502" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb212-503"><a href="#cb212-503" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-504"><a href="#cb212-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-505"><a href="#cb212-505" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** In the above examples, `cbind()` results in **school** being added as a *factor* while using the **\$** operator results in **school** being added as a *character* vector. You can see this by using the </span><span class="in">`str()`</span><span class="at"> command.</span></span>
<span id="cb212-506"><a href="#cb212-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-507"><a href="#cb212-507" aria-hidden="true" tabindex="-1"></a>A *factor* is another atomic data class for ***R*** for dealing efficiently with nominal variables, usually character strings. Internally, ***R*** assigns integer values to each unique string (e.g., 1 for "female", 2 for "male", etc.).</span>
<span id="cb212-508"><a href="#cb212-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-509"><a href="#cb212-509" aria-hidden="true" tabindex="-1"></a><span class="fu">### Filtering Rows of a Data Frame {.unnumbered}</span></span>
<span id="cb212-510"><a href="#cb212-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-511"><a href="#cb212-511" aria-hidden="true" tabindex="-1"></a>An expression that evaluates to a logical vector also be used to subset data frames. Here, we filter the data frame for only those rows where the variable **school** is "UT".</span>
<span id="cb212-512"><a href="#cb212-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-515"><a href="#cb212-515" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-516"><a href="#cb212-516" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span>, ]</span>
<span id="cb212-517"><a href="#cb212-517" aria-hidden="true" tabindex="-1"></a>new_df</span>
<span id="cb212-518"><a href="#cb212-518" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-519"><a href="#cb212-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-520"><a href="#cb212-520" aria-hidden="true" tabindex="-1"></a>In this case, ***R*** evaluates the expression `df$school == "UT"` and returns a logical vector equal in length to the number of rows in **df**.</span>
<span id="cb212-521"><a href="#cb212-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-524"><a href="#cb212-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-525"><a href="#cb212-525" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span></span>
<span id="cb212-526"><a href="#cb212-526" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-527"><a href="#cb212-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-528"><a href="#cb212-528" aria-hidden="true" tabindex="-1"></a>It then subsets the original **df** based on that vector, returning only rows that evaluate to "TRUE".</span>
<span id="cb212-529"><a href="#cb212-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-530"><a href="#cb212-530" aria-hidden="true" tabindex="-1"></a>The Boolean operators <span class="in">`&amp;`</span> (for "AND") and <span class="in">`|`</span> (for "OR") can be used to create more complex filtering criteria. Here, we filter the data frame for only those rows where the variable **school** is "UT" *AND* the variable **gender** is "female".</span>
<span id="cb212-531"><a href="#cb212-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-534"><a href="#cb212-534" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-535"><a href="#cb212-535" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span> <span class="sc">&amp;</span> df<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"female"</span>, ]</span>
<span id="cb212-536"><a href="#cb212-536" aria-hidden="true" tabindex="-1"></a>new_df</span>
<span id="cb212-537"><a href="#cb212-537" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-538"><a href="#cb212-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-539"><a href="#cb212-539" aria-hidden="true" tabindex="-1"></a>Here, we filter the data frame for only rows where either the **school** is "UT" *OR* the variable **gender** is "female", using the `|` operator. We also select only the columns **gender**, **name.first**, and **name.last** by passing a vector to the second argument of the <span class="in">`[ ]`</span> function.</span>
<span id="cb212-540"><a href="#cb212-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-543"><a href="#cb212-543" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-544"><a href="#cb212-544" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span> <span class="sc">|</span> df<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"female"</span>, <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"name.first"</span>, <span class="st">"name.last"</span>)]</span>
<span id="cb212-545"><a href="#cb212-545" aria-hidden="true" tabindex="-1"></a>new_df</span>
<span id="cb212-546"><a href="#cb212-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-547"><a href="#cb212-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-548"><a href="#cb212-548" aria-hidden="true" tabindex="-1"></a><span class="fu">### Selecting Columns of a Data Frame {.unnumbered}</span></span>
<span id="cb212-549"><a href="#cb212-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-550"><a href="#cb212-550" aria-hidden="true" tabindex="-1"></a>We can also select to only return particular columns when we filter. Here, we return only the columns **name.last**, **name.first**, and **school**.</span>
<span id="cb212-551"><a href="#cb212-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-554"><a href="#cb212-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-555"><a href="#cb212-555" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span>, <span class="fu">c</span>(<span class="st">"name.last"</span>, <span class="st">"name.first"</span>, <span class="st">"school"</span>)]</span>
<span id="cb212-556"><a href="#cb212-556" aria-hidden="true" tabindex="-1"></a>new_df</span>
<span id="cb212-557"><a href="#cb212-557" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-558"><a href="#cb212-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-559"><a href="#cb212-559" aria-hidden="true" tabindex="-1"></a>Here, we return all rows from the data frame, but only the "name.last", "name.first", and "school" columns.</span>
<span id="cb212-560"><a href="#cb212-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-563"><a href="#cb212-563" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-564"><a href="#cb212-564" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[ , <span class="fu">c</span>(<span class="st">"name.last"</span>, <span class="st">"name.first"</span>, <span class="st">"school"</span>)]</span>
<span id="cb212-565"><a href="#cb212-565" aria-hidden="true" tabindex="-1"></a>new_df</span>
<span id="cb212-566"><a href="#cb212-566" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-567"><a href="#cb212-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-568"><a href="#cb212-568" aria-hidden="true" tabindex="-1"></a>We can also refer to columns by their positions and return them in a select order, thereby restructuring the data frame. Here, we return all rows from the data frame, but include only columns 1, 3, and 4, flipping the order of the latter two columns:</span>
<span id="cb212-569"><a href="#cb212-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-572"><a href="#cb212-572" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-573"><a href="#cb212-573" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)]</span>
<span id="cb212-574"><a href="#cb212-574" aria-hidden="true" tabindex="-1"></a>new_df</span>
<span id="cb212-575"><a href="#cb212-575" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-576"><a href="#cb212-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-577"><a href="#cb212-577" aria-hidden="true" tabindex="-1"></a>We can use a minus sign <span class="in">`-`</span> in front of a vector of indices to instead indicate columns we do not want to return:</span>
<span id="cb212-578"><a href="#cb212-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-581"><a href="#cb212-581" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-582"><a href="#cb212-582" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[ , <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">18</span>)]</span>
<span id="cb212-583"><a href="#cb212-583" aria-hidden="true" tabindex="-1"></a>new_df</span>
<span id="cb212-584"><a href="#cb212-584" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-585"><a href="#cb212-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-586"><a href="#cb212-586" aria-hidden="true" tabindex="-1"></a><span class="fu">## Factors</span></span>
<span id="cb212-587"><a href="#cb212-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-588"><a href="#cb212-588" aria-hidden="true" tabindex="-1"></a>We were introduced to the *factor* data class above. Again, factors are numeric codes that ***R*** can use internally that correspond to character value "levels".</span>
<span id="cb212-589"><a href="#cb212-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-590"><a href="#cb212-590" aria-hidden="true" tabindex="-1"></a>When we load in data from an external source (as we do in <span class="co">[</span><span class="ot">**Module 08**</span><span class="co">](#module-08)</span>), {base} ***R*** tends to import character string data as factors, assigning to each unique string to an integer numeric code and assigning the string as a "label" for that code. Using factors can make some code run much more quickly (e.g., ANOVA, ANCOVA, and other forms of regression using categorical variables).</span>
<span id="cb212-591"><a href="#cb212-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-592"><a href="#cb212-592" aria-hidden="true" tabindex="-1"></a><span class="fu">## Variable Conversion and Coercion</span></span>
<span id="cb212-593"><a href="#cb212-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-594"><a href="#cb212-594" aria-hidden="true" tabindex="-1"></a>You can convert *factor* to *character* data (and vice versa) using the `as.character()` or `as.factor()` commands. You can also convert/coerce any vector to a different class using similar constructs (e.g., `as.numeric()`), although not all such conversions are really meaningful. Converting *factor* data to *numeric* results in the the converted data having the value of ***R***'s internal numeric code for the factor level, while converting *character* data to *numeric* results in the data being coerced into the special data value of <span class="in">`NA`</span> (see below) for missing data.</span>
<span id="cb212-595"><a href="#cb212-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-596"><a href="#cb212-596" aria-hidden="true" tabindex="-1"></a><span class="fu">## Special Data Values</span></span>
<span id="cb212-597"><a href="#cb212-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-598"><a href="#cb212-598" aria-hidden="true" tabindex="-1"></a>Finally, ***R*** has three special data values that it uses in a variety of situations.</span>
<span id="cb212-599"><a href="#cb212-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-600"><a href="#cb212-600" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`NA`</span> (for **not available**) is used for missing data. Many statistical functions offer the possibility to include as an argument <span class="in">`na.rm=TRUE`</span> ("remove NAs") so that <span class="in">`NA`</span>s are excluded from a calculation.</span>
<span id="cb212-601"><a href="#cb212-601" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`Inf`</span> (and <span class="in">`-Inf`</span>) is used when the result of a numerical calculation is too extreme for ***R*** to express</span>
<span id="cb212-602"><a href="#cb212-602" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`NaN`</span> (for **not a number**) is used when ***R*** cannot express the results of a calculation , e.g., when you try to take the square root of a negative number</span>
<span id="cb212-603"><a href="#cb212-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-604"><a href="#cb212-604" aria-hidden="true" tabindex="-1"></a><span class="fu">### CHALLENGE {.unnumbered}</span></span>
<span id="cb212-605"><a href="#cb212-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-606"><a href="#cb212-606" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Store the following vector of numbers as a 5 x 3 matrix: 3, 0, 1 ,23, 1, 2, 33, 1, 1, 42, 0, 1, 41, 0, 2</span>
<span id="cb212-607"><a href="#cb212-607" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Be sure to fill the matrix **ROWWISE**</span>
<span id="cb212-608"><a href="#cb212-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-611"><a href="#cb212-611" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-612"><a href="#cb212-612" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb212-613"><a href="#cb212-613" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb212-614"><a href="#cb212-614" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb212-615"><a href="#cb212-615" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span></span>
<span id="cb212-616"><a href="#cb212-616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">matrix</span>(</span>
<span id="cb212-617"><a href="#cb212-617" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span> , <span class="dv">23</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">33</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">42</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">41</span>, <span class="dv">0</span>, <span class="dv">2</span>),</span>
<span id="cb212-618"><a href="#cb212-618" aria-hidden="true" tabindex="-1"></a>    <span class="at">nrow =</span> <span class="dv">5</span>,</span>
<span id="cb212-619"><a href="#cb212-619" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb212-620"><a href="#cb212-620" aria-hidden="true" tabindex="-1"></a>    <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb212-621"><a href="#cb212-621" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb212-622"><a href="#cb212-622" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb212-623"><a href="#cb212-623" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-624"><a href="#cb212-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-625"><a href="#cb212-625" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Then, coerce the matrix to a data frame</span>
<span id="cb212-626"><a href="#cb212-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-629"><a href="#cb212-629" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-630"><a href="#cb212-630" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb212-631"><a href="#cb212-631" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb212-632"><a href="#cb212-632" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb212-633"><a href="#cb212-633" aria-hidden="true" tabindex="-1"></a>(d <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(m))</span>
<span id="cb212-634"><a href="#cb212-634" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-635"><a href="#cb212-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-636"><a href="#cb212-636" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>As a data frame, coerce the second column to be *logical* (i.e., Boolean)</span>
<span id="cb212-637"><a href="#cb212-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-640"><a href="#cb212-640" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-641"><a href="#cb212-641" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb212-642"><a href="#cb212-642" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb212-643"><a href="#cb212-643" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb212-644"><a href="#cb212-644" aria-hidden="true" tabindex="-1"></a>(d[,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(d[,<span class="dv">2</span>]))</span>
<span id="cb212-645"><a href="#cb212-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-646"><a href="#cb212-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-647"><a href="#cb212-647" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>As a data frame, coerce the third column to be a *factor*</span>
<span id="cb212-648"><a href="#cb212-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-651"><a href="#cb212-651" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-652"><a href="#cb212-652" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb212-653"><a href="#cb212-653" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show Code"</span></span>
<span id="cb212-654"><a href="#cb212-654" aria-hidden="true" tabindex="-1"></a><span class="co">#| attr.output: '.details summary="Show Output"'</span></span>
<span id="cb212-655"><a href="#cb212-655" aria-hidden="true" tabindex="-1"></a>(d[,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(d[,<span class="dv">3</span>]))</span>
<span id="cb212-656"><a href="#cb212-656" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-657"><a href="#cb212-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-658"><a href="#cb212-658" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>When you are done, use the <span class="in">`str()`</span> command to show the data type for each variable in your dataframe.</span>
<span id="cb212-659"><a href="#cb212-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-662"><a href="#cb212-662" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-663"><a href="#cb212-663" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb212-664"><a href="#cb212-664" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-665"><a href="#cb212-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-666"><a href="#cb212-666" aria-hidden="true" tabindex="-1"></a><span class="fu">## Other Data Frame-Like Structures</span></span>
<span id="cb212-667"><a href="#cb212-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-668"><a href="#cb212-668" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Tables {.unnumbered}</span></span>
<span id="cb212-669"><a href="#cb212-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-670"><a href="#cb212-670" aria-hidden="true" tabindex="-1"></a>A "data table" is a structure introduced in the package {data.table} that provides an enhancements to the data frame structure, which is the standard data structure for storing tabular data in {base} ***R***. We use the same syntax for creating a data table...</span>
<span id="cb212-671"><a href="#cb212-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-674"><a href="#cb212-674" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-675"><a href="#cb212-675" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span></span>
<span id="cb212-676"><a href="#cb212-676" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.table</span>(</span>
<span id="cb212-677"><a href="#cb212-677" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb212-678"><a href="#cb212-678" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb212-679"><a href="#cb212-679" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb212-680"><a href="#cb212-680" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb212-681"><a href="#cb212-681" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb212-682"><a href="#cb212-682" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb212-683"><a href="#cb212-683" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt)</span>
<span id="cb212-684"><a href="#cb212-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-685"><a href="#cb212-685" aria-hidden="true" tabindex="-1"></a><span class="co"># versus...</span></span>
<span id="cb212-686"><a href="#cb212-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-687"><a href="#cb212-687" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb212-688"><a href="#cb212-688" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb212-689"><a href="#cb212-689" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb212-690"><a href="#cb212-690" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb212-691"><a href="#cb212-691" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb212-692"><a href="#cb212-692" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb212-693"><a href="#cb212-693" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb212-694"><a href="#cb212-694" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb212-695"><a href="#cb212-695" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span>
<span id="cb212-696"><a href="#cb212-696" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-697"><a href="#cb212-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-698"><a href="#cb212-698" aria-hidden="true" tabindex="-1"></a>Note that printing a data table results in a slightly different output than printing a data frame (e.g., row numbers are printed followed by a ":") and the structure (<span class="in">`str()`</span>) looks a bit different. Also, different from data frames, when we read in data, columns of *character* type are never converted to factors by default (i.e., we do not need to specify anything like <span class="in">`stringsAsFactors=FALSE`</span> when we read in data... that's the opposite default as we see for data frames).</span>
<span id="cb212-699"><a href="#cb212-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-700"><a href="#cb212-700" aria-hidden="true" tabindex="-1"></a>The big advantage of using data tables over data frames is that they support a different, easier syntax for filtering rows and selecting columns and for grouping output.</span>
<span id="cb212-701"><a href="#cb212-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-704"><a href="#cb212-704" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-705"><a href="#cb212-705" aria-hidden="true" tabindex="-1"></a>dt[sex<span class="sc">==</span><span class="st">"M"</span>] <span class="co"># filter for sex = "M" in a data table</span></span>
<span id="cb212-706"><a href="#cb212-706" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"M"</span>, ] <span class="co"># filter for sex = "M" in a data frame</span></span>
<span id="cb212-707"><a href="#cb212-707" aria-hidden="true" tabindex="-1"></a>dt[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># return the first two rows of the data table</span></span>
<span id="cb212-708"><a href="#cb212-708" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ] <span class="co"># return the first two rows of the data table</span></span>
<span id="cb212-709"><a href="#cb212-709" aria-hidden="true" tabindex="-1"></a>dt[ , sex] <span class="co"># returns the variable "sex"</span></span>
<span id="cb212-710"><a href="#cb212-710" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt[ , sex]) <span class="co"># sex is a CHARACTER vector</span></span>
<span id="cb212-711"><a href="#cb212-711" aria-hidden="true" tabindex="-1"></a>df[, <span class="fu">c</span>(<span class="st">"sex"</span>)] <span class="co"># returns the variable "sex"</span></span>
<span id="cb212-712"><a href="#cb212-712" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[, <span class="fu">c</span>(<span class="st">"sex"</span>)]) <span class="co"># sex is a FACTOR with 2 levels</span></span>
<span id="cb212-713"><a href="#cb212-713" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-714"><a href="#cb212-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-715"><a href="#cb212-715" aria-hidden="true" tabindex="-1"></a>The data table structure also allows us more straightforward syntax - and implements much faster algorithms - for computations on columns and for perform aggregations of data by a grouping variable.</span>
<span id="cb212-716"><a href="#cb212-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-717"><a href="#cb212-717" aria-hidden="true" tabindex="-1"></a><span class="fu">### "Tibbles" {.unnumbered}</span></span>
<span id="cb212-718"><a href="#cb212-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-719"><a href="#cb212-719" aria-hidden="true" tabindex="-1"></a>A "tibble" is another newer take on the data frame structure, implemented in the package {tibble} (which is loaded as part of {tidyverse}). The structure was created to keep the best features of data frames and correct some of the more frustrating aspects associated with the older structure. For example, like data tables, tibbles do not by default change the input type of a variable from *character* to *factor* when the tibble is created.</span>
<span id="cb212-720"><a href="#cb212-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-723"><a href="#cb212-723" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-724"><a href="#cb212-724" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span></span>
<span id="cb212-725"><a href="#cb212-725" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb212-726"><a href="#cb212-726" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb212-727"><a href="#cb212-727" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb212-728"><a href="#cb212-728" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb212-729"><a href="#cb212-729" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb212-730"><a href="#cb212-730" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb212-731"><a href="#cb212-731" aria-hidden="true" tabindex="-1"></a>t</span>
<span id="cb212-732"><a href="#cb212-732" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(t)</span>
<span id="cb212-733"><a href="#cb212-733" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-734"><a href="#cb212-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-735"><a href="#cb212-735" aria-hidden="true" tabindex="-1"></a>Note that the output of printing a tibble again looks slightly different than that for data frames or data tables... e.g., the data type of each column is included in the header row, for example. <span class="in">`str()`</span> also shows us that characters were not converted to factors.</span>
<span id="cb212-736"><a href="#cb212-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-737"><a href="#cb212-737" aria-hidden="true" tabindex="-1"></a>Additionally, subsetting tibbles with the single bracket operator (<span class="in">`[ ]`</span>) always returns a tibble, whereas doing the same with a data frame can return either a data frame or a vector.</span>
<span id="cb212-738"><a href="#cb212-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-741"><a href="#cb212-741" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-742"><a href="#cb212-742" aria-hidden="true" tabindex="-1"></a>t[, <span class="st">"age"</span>]</span>
<span id="cb212-743"><a href="#cb212-743" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(t[, <span class="st">"age"</span>])</span>
<span id="cb212-744"><a href="#cb212-744" aria-hidden="true" tabindex="-1"></a>df[, <span class="st">"age"</span>]</span>
<span id="cb212-745"><a href="#cb212-745" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df[, <span class="st">"age"</span>])</span>
<span id="cb212-746"><a href="#cb212-746" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-747"><a href="#cb212-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-748"><a href="#cb212-748" aria-hidden="true" tabindex="-1"></a>There are some other subtle differences regarding the behavior of tibbles versus data frames that are also worthwhile to note. Data frames support "partial matching" in variable names when the <span class="in">`$`</span> operator is used, thus <span class="in">`df$a`</span> will return the variable <span class="in">`df$age`</span>. Tibbles are stricter and will never do partial matching.</span>
<span id="cb212-749"><a href="#cb212-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-752"><a href="#cb212-752" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-753"><a href="#cb212-753" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>a <span class="co"># returns df$age</span></span>
<span id="cb212-754"><a href="#cb212-754" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>a <span class="co"># returns NULL and gives a warning</span></span>
<span id="cb212-755"><a href="#cb212-755" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-756"><a href="#cb212-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-757"><a href="#cb212-757" aria-hidden="true" tabindex="-1"></a>Finally, tibbles are careful about recycling. When creating a tibble, columns have to have consistent lengths and only values of length 1 are recycled. Thus, in the following...</span>
<span id="cb212-758"><a href="#cb212-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-761"><a href="#cb212-761" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-762"><a href="#cb212-762" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">c=</span><span class="dv">1</span>)</span>
<span id="cb212-763"><a href="#cb212-763" aria-hidden="true" tabindex="-1"></a><span class="co"># this works fine... c is recycled</span></span>
<span id="cb212-764"><a href="#cb212-764" aria-hidden="true" tabindex="-1"></a>t</span>
<span id="cb212-765"><a href="#cb212-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-766"><a href="#cb212-766" aria-hidden="true" tabindex="-1"></a><span class="co"># t &lt;- tibble(a=1:4, c=1:2)</span></span>
<span id="cb212-767"><a href="#cb212-767" aria-hidden="true" tabindex="-1"></a><span class="co"># but this would throw an error... c is not recycled even</span></span>
<span id="cb212-768"><a href="#cb212-768" aria-hidden="true" tabindex="-1"></a><span class="co"># though it could fit evenly into the number of rows</span></span>
<span id="cb212-769"><a href="#cb212-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-770"><a href="#cb212-770" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">c=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb212-771"><a href="#cb212-771" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb212-772"><a href="#cb212-772" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-773"><a href="#cb212-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-776"><a href="#cb212-776" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb212-777"><a href="#cb212-777" aria-hidden="true" tabindex="-1"></a><span class="co"># | include: false</span></span>
<span id="cb212-778"><a href="#cb212-778" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>tidyverse)</span>
<span id="cb212-779"><a href="#cb212-779" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>data.table)</span>
<span id="cb212-780"><a href="#cb212-780" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb212-781"><a href="#cb212-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-782"><a href="#cb212-782" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb212-783"><a href="#cb212-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-784"><a href="#cb212-784" aria-hidden="true" tabindex="-1"></a><span class="fu">## Concept Review {.unnumbered}</span></span>
<span id="cb212-785"><a href="#cb212-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-786"><a href="#cb212-786" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Creating matrices and arrays: <span class="in">`matrix(data=, nrow=, ncol=, byrow=)`</span>, <span class="in">`array(data=, dim=)`</span>, <span class="in">`rbind()`</span>, <span class="in">`cbind()`</span></span>
<span id="cb212-787"><a href="#cb212-787" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Creating lists: <span class="in">`list()`</span></span>
<span id="cb212-788"><a href="#cb212-788" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Creating data frames: <span class="in">`data.frame()`</span></span>
<span id="cb212-789"><a href="#cb212-789" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Subsetting: single bracket (<span class="in">`[ ]`</span>), double bracket (<span class="in">`[[ ]]`</span>), and <span class="in">`$`</span> notation</span>
<span id="cb212-790"><a href="#cb212-790" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Variable coercion: <span class="in">`as.numeric()`</span>, <span class="in">`as.character()`</span>, <span class="in">`as.data.frame()`</span></span>
<span id="cb212-791"><a href="#cb212-791" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Reading .csv data: <span class="in">`read.csv(file=, header=, stringsAsFactors=)`</span></span>
<span id="cb212-792"><a href="#cb212-792" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Filtering rows of a data frame using {base} ***R***: <span class="in">`df[df$&lt;variable name&gt; == "&lt;criterion&gt;", ]`</span>, <span class="in">`df[df[["&lt;variable name&gt;"]] == "&lt;criterion&gt;", ]`</span></span>
<span id="cb212-793"><a href="#cb212-793" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Selecting/excluding columns of a data frame: <span class="in">`df[ , c("&lt;variable name 1&gt;", "&lt;variable name 2&gt;",...)]`</span>,<span class="in">`df[ , c(&lt;column index 1&gt;, &lt;column index 2&gt;,...)]`</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>